function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("dataFixer/helpers/CompsMigrationHelper",["lodash","coreUtils"],function(e,t){"use strict";function n(e){this.migrationMap=e}return n.prototype.getComponentData=function(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]},n.prototype.setComponentData=function(n,i,r,o){var a=i.dataQuery||e.get(o,[i.id,"dataQuery"])||t.guidUtils.getUniqueId("dataItem","-");a=a.replace("#",""),i.dataQuery="#"+a,r.id=a,n.data.document_data[a]=r,e.set(o,[i.id,"dataQuery"],a)},n.prototype.deleteComponentData=function(e,t){var n=t.dataQuery&&t.dataQuery.replace("#","");n&&e.data.document_data[n]&&delete e.data.document_data[n]},n.prototype.getComponentDesignData=function(e,t){return t.designQuery&&e.data.design_data[t.designQuery.replace("#","")]},n.prototype.deleteComponentDesignData=function(e,t){var n=t.designQuery&&t.designQuery.replace("#","");n&&e.data.design_data[n]&&delete e.data.design_data[n]},n.prototype.getComponentProperties=function(e,t){return t.propertyQuery&&e.data.component_properties[t.propertyQuery.replace("#","")]},n.prototype.deleteComponentProperties=function(e,t){var n=t.propertyQuery&&t.propertyQuery.replace("#","");n&&e.data.component_properties[n]&&delete e.data.component_properties[n],t.propertyQuery&&delete t.propertyQuery},n.prototype.setComponentDesignData=function(n,i,r,o){var a=i.designQuery||e.get(o,[i.id,"designQuery"])||t.guidUtils.getUniqueId("dataItem","-");if(a=a.replace("#",""),i.designQuery="#"+a,r.id=a,e.isObject(r.background)){var s=e.clone(r.background);s.id=(s.id||t.guidUtils.getUniqueId("dataItem","-")).replace("#",""),r.background="#"+s.id,n.data.design_data[s.id]=s}n.data.design_data[a]=r,e.set(o,[i.id,"designQuery"],i.designQuery)},n.prototype.setComponentProperties=function(n,i,r,o){var a=i.propertyQuery||e.get(o,[i.id,"propertyQuery"])||t.guidUtils.getUniqueId("propItem","-");a=a.replace("#",""),i.propertyQuery=a,r.id=a,n.data.component_properties[a]=r,e.set(o,[i.id,"propertyQuery"],a)},n.prototype.migrateComps=function(t,n,i,r){e.forEach(r,function(e){this.migrationMap[e.componentType]&&this.migrationMap[e.componentType].call(this,t,n,i,e),this.migrateComps(t,n,i,e.components)}.bind(this))},n.prototype.migratePage=function(e){var t=e.structure;if(t){var n={},i=t.components||t.children,r=t.mobileComponents;i&&this.migrateComps(e,n,!1,i),r&&this.migrateComps(e,n,!0,r)}},n}),define("dataFixer/maps/galleryTypes",[],function(){"use strict";return{"wysiwyg.viewer.components.MatrixGallery":{propType:"MatrixGalleryProperties"},"wysiwyg.viewer.components.PaginatedGridGallery":{propType:"PaginatedGridGalleryProperties"},"wysiwyg.viewer.components.SliderGallery":{propType:"SliderGalleryProperties"},"wysiwyg.viewer.components.SlideShowGallery":{propType:"SlideShowGalleryProperties"},"tpa.viewer.components.Masonry":{propType:"MasonryProperties"},"tpa.viewer.components.Accordion":{propType:"AccordionProperties"},"tpa.viewer.components.Impress":{propType:"ImpressProperties"},"tpa.viewer.components.Freestyle":{propType:"FreestyleProperties"},"tpa.viewer.components.Collage":{propType:"CollageProperties"},"tpa.viewer.components.Honeycomb":{propType:"HoneycombProperties"},"tpa.viewer.components.StripShowcase":{propType:"StripShowcaseProperties"},"tpa.viewer.components.StripSlideshow":{propType:"StripSlideshowProperties"},"tpa.viewer.components.Thumbnails":{propType:"ThumbnailsProperties"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{propType:"SlideShowGalleryProperties"},"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{propType:"SlideShowGalleryProperties"}}}),define("dataFixer/plugins/galleriesMobileTypeFixer",["lodash","dataFixer/helpers/CompsMigrationHelper","dataFixer/maps/galleryTypes"],function(e,t,n){"use strict";function i(e,t,i,r){if(i){var o=t[r.id];if(o.componentType!==r.componentType){var a=o.componentType;r.componentType=a;var s=this.getComponentProperties(e,r),u=n[a].propType;!a||s&&s.type===u||(r.propertyQuery=o.propertyQuery)}}else t[r.id]=r}return{exec:function(r){var o=e.mapValues(n,function(){return i});new t(o).migratePage(r)}}}),define("dataFixer/plugins/pageTopFixer",[],function(){"use strict";return{exec:function(e){e.structure=e.structure||{},e.structure.layout=e.structure.layout||{},e.structure.layout.y=0}}}),define("dataFixer/helpers/runOnAllCompsRecursively",["lodash"],function(e){"use strict";function t(n,i){e.forEach(n,function(n){e.forEach(i,function(e){e(n)}),n.components&&t(n.components,i)})}return t}),define("dataFixer/plugins/masterPageFixer",["lodash","dataFixer/helpers/runOnAllCompsRecursively"],function(e,t){"use strict";function n(t){return 0===e.get(t,"layout.width")}function i(t){return 0===e.get(t,"layout.height")}function r(t){n(t)&&e.set(t,"layout.width",100),i(t)&&e.set(t,"layout.height",100)}function o(o,a){var s=!1;if(e.forEach(["SITE_HEADER","SITE_FOOTER"],function(t){var r=e.find(o,{id:t});n(r)&&(s=!0),i(r)&&(e.set(r,"layout.height",100),s=!0),e.set(r,"layout.width",a)}),s){var u=e.reject(o,{id:"PAGES_CONTAINER"});t(u,[r])}}function a(t,n,i){var r=t.children,a=t.mobileComponents,u=e.get(n,"masterPage.renderModifiers.siteWidth",980);s(r),o(r,u),s(a),o(a,320),function(t,n){if(!n){var i=e.find(t,{id:"SITE_HEADER"});e.set(i,["layout","fixedPosition"],!1)}var r=e.find(t,{id:"SITE_FOOTER"});e.set(r,["layout","fixedPosition"],!1)}(a,i),function(t){e.forEach(t,function(t){e.forEach(e.get(t,"layout.anchors"),function(e){switch(t.id){case"SITE_FOOTER":"BOTTOM_PARENT"===e.type&&(e.distance=0);break;case"PAGES_CONTAINER":"BOTTOM_TOP"===e.type&&e.locked&&e.distance>=70&&(e.originalValue=0,e.locked=!1)}})})}(a)}function s(t){e.forEach(u,function(n){if(!e.find(t,{id:n.id})){var i=e.find(t,{componentType:n.componentType});i&&(i.id=n.id)}})}var u=[{componentType:"wysiwyg.viewer.components.PagesContainer",id:"PAGES_CONTAINER"},{componentType:"wysiwyg.viewer.components.FooterContainer",id:"SITE_FOOTER"},{componentType:"wysiwyg.viewer.components.HeaderContainer",id:"SITE_HEADER"}];return{exec:function(e,t,n,i,r,o,s,u){if(e.structure&&"Document"===e.structure.type){e.structure.id="masterPage",e.structure.componentType="mobile.core.components.MasterPage",function(e){e.SITE_STRUCTURE&&(e.masterPage=e.SITE_STRUCTURE),e.masterPage||(e.masterPage={}),e.masterPage.id="masterPage",delete e.SITE_STRUCTURE}(e.data.document_data);var c=u.isExperimentOpen("sv_fixedMobileHeader");a(e.structure,e.data.document_data,c)}return e}}}),define("dataFixer/plugins/menuFixer",["lodash"],function(e){"use strict";function t(n){return e.reduce(n.items,function(e,n){return e.push(n.refId),n.items&&n.items.length?e.concat(t(n)):e},[])}function n(t,n){var i=e.findIndex(t.items,{refId:n});if(i>=0)!function(t,n){var i=t.items[n];i.items&&i.items.length>0&&e.forEach(i.items,function(e,n){t.items.push(e),delete i.items[n]}),i.items=[],t.items.splice(n,1)}(t,i);else{var r=function(t,n){var i={};return e.find(t.items,function(t,r){return i.topIndex=r,e.find(t.items,function(e,t){if(e.refId===n)return i.subIndex=t,!0})}),i}(t,n);t.items[r.topIndex].items.splice(r.subIndex,1)}}function i(e){return e.replace("#","")}function r(e,t){return!e[i(t)]}function o(o,a){var s=function(e){return t(e.MAIN_MENU)}(o);!function(t){var n=e.get(t,["CUSTOM_MAIN_MENU","items"]);n&&e.some(n,e.partial(r,t))&&(delete t.CUSTOM_MAIN_MENU,delete t.CUSTOM_MENUS)}(o),function(t,i){var r=t.MAIN_MENU;e.forEach(i,function(e){e||n(r,e)}),e.pull(i,"",void 0)}(o,s),function(t,i,r){e.forEach(i,function(i){e.includes(r,i.slice(1))||n(t.MAIN_MENU,i)})}(o,s,a),function(t,n,i){var r=t.MAIN_MENU,o=0===r.items.length;if(t.CUSTOM_MAIN_MENU){if(o)return;delete t.CUSTOM_MAIN_MENU,delete t.CUSTOM_MENUS}e.forEach(i,function(t){if(!e.includes(n,"#"+t)){n.push("#"+t);var i={items:[],refId:"#"+t};r.items.push(i)}})}(o,s,a);!function(t,n){t&&t.mainPage&&!e.includes(n,i(t.mainPage))&&(t.mainPage="#"+n[0])}(o.masterPage,a)}return{exec:function(t,n){var i=t.data.document_data;(function(t){return"Document"===e.get(t,"structure.type")})(t)&&(i.MAIN_MENU=i.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},n&&o(i,n))}}}),define("dataFixer/plugins/customSiteMenuFixer",["lodash","dataFixer/plugins/menuFixer"],function(e,t){"use strict";function n(t,r){return e.map(t,function(e){return function(e,t){var r=m+d++,o=e[u(t.refId)];return e[r]={id:r,label:o.title,isVisible:!o.hidePage,isVisibleMobile:void 0!==o.mobileHidePage?!o.mobileHidePage:!o.hidePage,items:n(t.items,e),link:i(e,t.refId),type:"BasicMenuItem",metaData:{}},"#"+r}(r,e)})}function i(e,t){var n=g+l++;return e[n]={id:n,type:"PageLink",pageId:t,metaData:{}},"#"+n}function r(e,t){return t&&e[u(t)]}function o(t,n){var i=r(t,n.link);return"PageLink"===e.get(i,"type")?i:void 0}function a(e,t){return t.link&&("#CUSTOM_MENU_HEADER"===t.link||function(e,t){var n=o(e,t);return n&&!r(e,n.pageId)}(e,t))}function s(t,n){n.items=e.filter(n.items,function(n){return!e.isUndefined(r(t,n))}),e.forEach(n.items,function(e){var n=r(t,e);a(t,n)&&function(e){delete e.link}(n),s(t,n)})}function u(t){return e.replace(t,"#","")}function c(t,n){var r=t.CUSTOM_MAIN_MENU.items,o=e(t).filter({type:"BasicMenuItem"}).map("link").compact().map(u).map(function(e){return t[e]}).map("pageId").compact().map(u).value(),a=e.difference(n,o);e.forEach(a,function(e){t[e].isPopup||r.push(function(e,t){var n=m+d++,r=e[t];return e[n]={id:n,label:r.title,isVisible:!r.hidePage,isVisibleMobile:void 0!==r.mobileHidePage?!r.mobileHidePage:!r.hidePage,items:[],link:i(e,"#"+t),type:"BasicMenuItem",metaData:{}},"#"+n}(t,e))})}function p(t,n){var i=e.filter(t,function(e){return e.id&&0===e.id.indexOf(n)}),r=-1;return e.forEach(i,function(e){var t=Number(e.id.replace(n,""));t>r&&(r=t)}),++r}var d=0,l=0,m="bmi",g="pglk";return{exec:function(i,a){if(function(t){return"Page"===e.get(t,"structure.type")}(i))!function(t){e(t.data.document_data).filter({type:"Menu"}).map("id").forEach(function(e){delete t.data.document_data[e]})}(i);else{t.exec(i,a);var f=i.data.document_data;d=p(f,m),l=p(f,g),i.data.document_data.CUSTOM_MAIN_MENU||(i.data.document_data.CUSTOM_MAIN_MENU={id:"CUSTOM_MAIN_MENU",items:n(i.data.document_data.MAIN_MENU.items,i.data.document_data),name:"Custom Main Menu",type:"CustomMenu",metaData:{}}),i.data.document_data.CUSTOM_MENUS?e.includes(i.data.document_data.CUSTOM_MENUS.menus,"#CUSTOM_MAIN_MENU")||i.data.document_data.CUSTOM_MENUS.menus.push("#CUSTOM_MAIN_MENU"):i.data.document_data.CUSTOM_MENUS={id:"CUSTOM_MENUS",menus:["#CUSTOM_MAIN_MENU"],type:"CustomMenusCollection",metaData:{}},c(f,a),f.CUSTOM_MAIN_MENU.items=e.uniq(f.CUSTOM_MAIN_MENU.items),s(f,f.CUSTOM_MAIN_MENU),i.data.document_data.MAIN_MENU.items.length>0&&(i.data.document_data.MAIN_MENU.items=[]);var y=i.data.document_data.CUSTOM_MAIN_MENU;(function(t,n){function i(n){n.items=e.filter(n.items,a),e(n.items).map(function(e){return r(t.data.document_data,e)}).forEach(i)}function a(i){var a=t.data.document_data,s=r(a,i);return!s.link||!o(a,s)||function(){var t=r(a,s.link),i=e.get(t,"pageId");return e.includes(n,u(i))}()}return{removeInvalidSubMenues:i}})(i,a).removeInvalidSubMenues(y)}}}}),define("dataFixer/plugins/multipleMenusFixer",["lodash","dataFixer/helpers/CompsMigrationHelper"],function(e,t){"use strict";function n(e,t,n,i){var r=this.getComponentData(e,i);r&&"CustomMenuDataRef"===r.type||(delete i.dataQuery,this.setComponentData(e,i,{menuRef:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},t))}var i=new t({"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":n,"wysiwyg.viewer.components.menus.DropDownMenu":n});return{exec:i.migratePage.bind(i)}}),define("dataFixer/plugins/verticalMenuFixer",["lodash","coreUtils","skinExports"],function(e,t,n){"use strict";function i(t,n){return"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"===n.componentType&&!function(t,n){var i=r(t,n);return!e.isUndefined(i.menuItemHeight)}(t,n)}function r(e,t){return e.data.component_properties[t.propertyQuery.replace("#","")]}function o(i,o){var a=function(e,t){return e.data.document_data[t.dataQuery.replace("#","")]}(i,o),s=e.get(a,"menuRef","").replace("#",""),u=p[s],d=function(e,t){return e.data.theme_data[t.styleId]||c[t.styleId]}(i,o);if(d){var l=parseInt(d.style.properties.sepw||d.style.properties.separatorHeight||0,10),m=n[d.skin];!function(e,n,i){var o=r(e,n);i?o.menuItemHeight=i:t.log.error("cannot find menu items")}(i,o,t.verticalMenuCalculations.getItemHeight(o.layout.height,l,u,m))}else t.log.error("cannot find style")}function a(t,n){e.forEach(n,function(e){i(t,e)&&o(t,e),e.components&&a(t,e.components)})}function s(e){var t=e.structure;t&&(t.components&&a(e,t.components),t.mobileComponents&&a(e,t.mobileComponents),t.children&&a(e,t.children))}var u=!1,c={},p={},d=[];return{exec:function(t){if(function(e){return!!e.data.theme_data.THEME_DATA}(t))for(!function(e){c=e.data.theme_data}(t),function(t){var n=t.data.document_data,i=n.CUSTOM_MENUS&&n.CUSTOM_MENUS.menus||[];e.forEach(i,function(t){var i=t.replace("#",""),r=n[i]&&n[i].items||[],o=e.filter(r,function(e){return n[e.replace("#","")].isVisible}).length;p[i]=o||1})}(t),s(t),u=!0;d.length>0;)s(d.pop());else u?s(t):d.push(t)}}}),define("dataFixer/plugins/skinFixer",["lodash"],function(e){"use strict";function t(e){e.skin&&i[e.skin]&&(e.skin=i[e.skin])}function n(e,i){var r=void 0,o=void 0,a=e[i]||e.components;if(a)for(r=0;r<a.length;r++)t(o=a[r]),n(o,i)}var i={"mobile.core.skins.InlineSkin":"skins.core.VerySimpleSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin","skins.viewer.gallerymatrix.PolaroidCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin","skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin","skins.viewer.galleryslider.SliderGalleryScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin","skins.viewer.galleryslider.SliderGalleryIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin","skins.viewer.galleryslider.SliderDisplayerIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerIronSkin","skins.viewer.galleryslider.SliderDisplayerScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerScotchTapeSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGallerySeparateTextBoxSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGallerySeparateTextBoxSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextOnCenterSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGalleryTextOnCenterSkin","wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuIISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.TextOnlyMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonBgFixSkin","wysiwyg.viewer.skins.menu.TextSeparatorsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.menu.SolidColorMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.menu.OverlineMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.SeparateBasicMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.LinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.SeparateLinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.PointerMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.RibbonsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.menu.IndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateIndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.ArrowRightMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.menu.SloppyBorderMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","tpa.viewer.skins.TPAMasonrySkin":"wysiwyg.viewer.skins.TPAMasonrySkin","tpa.viewer.skins.TPA3DCarouselSkin":"wysiwyg.viewer.skins.TPA3DCarouselSkin","tpa.viewer.skins.TPA3DGallerySkin":"wysiwyg.viewer.skins.TPA3DGallerySkin","tpa.viewer.skins.TPAAccordionSkin":"wysiwyg.viewer.skins.TPAAccordionSkin","tpa.viewer.skins.TPACollageSkin":"wysiwyg.viewer.skins.TPACollageSkin","tpa.viewer.skins.TPAEcomGallerySkin":"wysiwyg.viewer.skins.TPAEcomGallerySkin","tpa.viewer.skins.TPAFreestyleSkin":"wysiwyg.viewer.skins.TPAFreestyleSkin","tpa.viewer.skins.TPAHoneycombSkin":"wysiwyg.viewer.skins.TPAHoneycombSkin","tpa.viewer.skins.TPAImpressSkin":"wysiwyg.viewer.skins.TPAImpressSkin","tpa.viewer.skins.TPAStripShowcaseSkin":"wysiwyg.viewer.skins.TPAStripShowcaseSkin","tpa.viewer.skins.TPAStripSlideshowSkin":"wysiwyg.viewer.skins.TPAStripSlideshowSkin","tpa.viewer.skins.TPAThumbnailsSkin":"wysiwyg.viewer.skins.TPAThumbnailsSkin","tpa.common.skins.TPAPreloaderSkin":"wysiwyg.viewer.skins.TPAPreloaderSkin","tpa.common.skins.TPAUnavailableMessageOverlaySkin":"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin"};return{exec:function(i){var r=i.structure;r&&(n(r,"children"),n(r,"mobileComponents"),t(r));var o=i.data&&i.data.theme_data;o&&e.forEach(o,function(e){t(e)})}}}),define("dataFixer/plugins/stylesFixer",["lodash"],function(e){"use strict";function t(e,t,n){return e[n.replace("llt_","llf_")]=t,e}var n=function(n){n.style.properties=e.reduce(n.style.properties,t,{}),n.style.propertiesSource=e.reduce(n.style.propertiesSource,t,{})},i={"*":function(e){"THEME_DATA"!==e.id&&(e.style||(e.style={properties:{},propertiesSource:{},groups:{}}))},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":n,"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":n};return{exec:function(t){var n=t.data&&t.data.theme_data;e.isEmpty(n)||(!function(t){if(!t.v2){var n={type:"TopLevelStyle",id:"v2",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{brd:"color_15",brw:"0px",rd:"0px",shd:"0 1px 4px rgba(0, 0, 0, 0.6);"},propertiesSource:{brd:"theme",brw:"value",rd:"value",shd:"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.video.VideoDefault"};t.v2=e.cloneDeep(t.vl)||n}}(n),function(t){e.forOwn(t,function(e){i["*"](e),i[e.skin]&&i[e.skin](e)})}(n),e.forEach(n,function(t){!function(t){t.style&&e.forEach(t.style.properties,function(e,t,n){"string"==typeof e&&(n[t]=e.replace(/(\d)x/g,"$1px"))})}(t)}))}}}),define("dataFixer/plugins/bgImageStripDataFixer",["lodash"],function(e){"use strict";function t(e){return e&&"wysiwyg.viewer.components.BgImageStrip"===e.componentType}function n(e,n,i){if(t(i)){var r=function(e){return e&&e.dataQuery&&e.dataQuery.replace("#","")}(i),a=r&&n[r];a&&(a.title=a.title||"",function(e){return e.uri.slice(0-o.length)===o}(a)||(e[i.id]=r))}}function i(e,n,i){if(t(i)){var r=e[i.id];r?i.dataQuery="#"+r:delete i.dataQuery}}function r(t,n){e.forEach(t,function(e){n(e),r(e.components,n)})}var o="add_image_thumb.png";return{exec:function(e){var t=e.structure,o=t&&(t.components||t.children),a=t&&t.mobileComponents;if(o){var s={};r(o,n.bind(null,s,e.data.document_data)),r(o,i.bind(null,s,e.data.document_data)),r(a,i.bind(null,s,e.data.document_data))}}}}),define("dataFixer/plugins/compFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(e,t,n){var i=e[n.componentType];i&&(n.componentType=i.comp,i.dataQuery&&(n.dataQuery=i.dataQuery),i.callback&&i.callback(t))}function i(e,t){"wysiwyg.viewer.components.ItunesButton"===t.componentType&&(t.layout.height=Math.round(t.layout.width/2.75))}function r(e,t){return e.data.component_properties[t.propertyQuery]}function o(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]}function a(e,t,n){e.data.component_properties[t.propertyQuery]=n}function s(e,n,i){var r=t.guidUtils.getUniqueId("dataItem","-");n.dataQuery="#"+r,i.id=r,e.data.document_data[r]=i}function u(t,n){"SITE_FOOTER"!==n.id||n.layout||(n.layout={anchors:[],fixedPosition:!1,height:function(t){if(t.components.length>0){var n=e.map(t.components,function(e){return e.layout.y+e.layout.height});return e.max(n)}return 0}(n),rotationInDegrees:0,scale:1,width:320,x:0,y:function(t){var n=e.find(t.structure.children,{id:"PAGES_CONTAINER"});return n.layout.y+n.layout.height}(t)})}function c(e,t){if(!o(e,t))switch(t.componentType){case"wysiwyg.viewer.components.svgshape.SvgShape":s(e,t,{link:null,type:"SvgShape"});break;case"wysiwyg.viewer.components.WFacebookComment":return void s(e,t,{type:"WFacebookComment",urlFormat:"hashBang"});case"wysiwyg.viewer.components.WFacebookLike":return void s(e,t,{type:"WFacebookLike",urlFormat:"hashBang"})}}function p(e,t){var n=o(e,t);if(n)switch(t.componentType){case"wysiwyg.viewer.components.ClipArt":return void(n.title="");case"wysiwyg.viewer.components.FacebookShare":case"wysiwyg.viewer.components.VKShareButton":case"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":case"wysiwyg.viewer.components.WTwitterTweet":case"wysiwyg.viewer.components.WFacebookComment":case"wysiwyg.viewer.components.WFacebookLike":return void(n.urlFormat=n.urlFormat||"hashBang")}}function d(e,t,n){"wysiwyg.common.components.anchor.viewer.Anchor"===n.componentType&&0===n.layout.width&&(n.layout.width=e)}function l(e,t){if(!r(e,t))switch(t.componentType){case"wysiwyg.viewer.components.menus.DropDownMenu":a(e,t,{alignButtons:"center",alignText:"center",sameWidthButtons:!1,moreButtonLabel:"More",moreItemHeight:15,stretchButtonsToMenuWidth:!0,type:"HorizontalMenuProperties"});break;case"wysiwyg.viewer.components.mobile.TinyMenu":t.propertyQuery="TINY_MENU",a(e,t,{direction:"left",type:"TinyMenuProperties",id:"TINY_MENU",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}})}}function m(e,t,n){e.properties[n.id]=r(t,n)}function g(e,t,n){!r(t,n)&&e.properties[n.id]&&a(t,n,e.properties[n.id])}function f(n,i){var o=r(n,i);if(i.propertyQuery&&o)switch(i.componentType){case"wysiwyg.viewer.components.WFacebookLike":case"wysiwyg.viewer.components.PayPalButton":case"wysiwyg.viewer.components.GoogleMap":o.language||(o.language="en");break;case"wysiwyg.viewer.components.WRichText":"WRichTextProperties"!==o.type&&delete i.propertyQuery;break;case"wysiwyg.viewer.components.HoverBox":o.mobileDisplayedModeId&&function(t,n){var i=e.get(t,"modes.definitions");return!e.some(i,{modeId:n})}(i,o.mobileDisplayedModeId)&&(o.mobileDisplayedModeId=function(n){var i=e.get(n,"modes.definitions");return e.find(i,{type:t.siteConstants.COMP_MODES_TYPES.HOVER}).modeId}(i))}}function y(t,n,i){e.forEach(n,function(n){e.forEach(i,function(e){e(t,n)}),n.components&&y(t,n.components,i)})}function w(t){return e.partial(n,function(e){var t={"wysiwyg.viewer.components.HorizontalMenu":{comp:"wysiwyg.viewer.components.menus.DropDownMenu",dataQuery:"#MAIN_MENU"}};return e&&(t["wysiwyg.viewer.components.ClipArt"]={comp:"wysiwyg.viewer.components.WPhoto"}),t}(t))}function v(e,t,n){e.pageContainsStructuresWithoutJsonAnchors=e.pageContainsStructuresWithoutJsonAnchors||!n.layout||!n.layout.anchors}function h(e,t){t.layout&&delete t.layout.anchors}return{exec:function(t,n,r,o,a,s,T,S){var k=t.structure;if(k){var x={properties:{}},I=k.components||k.children,_=k.mobileComponents,F=S.isExperimentOpen("merge_clipart_and_image");I&&function(t,n,r,o){y(t,r,[w(o),i,c,l,f,p,e.partial(d,1920),e.partial(m,n)])}(t,x,I,F),_&&function(t,n,r,o){var a={pageContainsStructuresWithoutJsonAnchors:!1};y(t,r,[w(o),i,c,l,f,p,u,e.partial(d,320),e.partial(g,n),e.partial(v,a)]),a.pageContainsStructuresWithoutJsonAnchors&&y(t,r,[h])}(t,x,_,F)}}}}),define("dataFixer/plugins/galleryFixer",["lodash"],function(e){"use strict";var t=["GalleryExpandProperties","MatrixGalleryProperties","PaginatedGridGalleryProperties","SliderGalleryProperties","SlideShowGalleryProperties"],n=function(t){return(e.isUndefined(t.galleryImageOnClickAction)||"unset"===t.galleryImageOnClickAction)&&(!1===t.expandEnabled?t.galleryImageOnClickAction="disabled":t.galleryImageOnClickAction="zoomMode"),t};return{exec:function(i){!function(t,n,i){e(t).pickBy(function(t){return e.includes(n,t.type)}).mapValues(i).value()}(i.data.component_properties,t,n)}}}),define("dataFixer/helpers/behaviorsMigrationHelper",["coreUtils"],function(e){"use strict";return{createBehaviorsDataItem:function(t){return{id:e.guidUtils.getUniqueId("behavior","-"),type:"ObsoleteBehaviorsList",items:t}}}}),define("dataFixer/plugins/behaviorsDataFixer",["lodash","coreUtils","dataFixer/helpers/behaviorsMigrationHelper"],function(e,t,n){"use strict";function i(i){var r=e.get(i,"data"),o=e.get(i,"structure");r.behaviors_data=r.behaviors_data||{};var a=function(n){var i=t.dataUtils.getAllCompsInStructure(n,!1);return e.pickBy(i,"behaviors")}(o),s=function(n,i){var r=t.dataUtils.getAllCompsInStructure(n,!0);return e.pickBy(r,function(e){return i[e.id]})}(o,a);e.forEach(a,function(t){var i=n.createBehaviorsDataItem(t.behaviors);!function(e,t,n){e.behaviorQuery=t.id,n&&(n.behaviorQuery=e.behaviorQuery)}(t,i,s[t.id]),delete t.behaviors,e.set(r,["behaviors_data",i.id],i)})}return{exec:i}}),define("dataFixer/plugins/behaviorsFixer",["lodash","dataFixer/plugins/behaviorsDataFixer"],function(e,t){"use strict";function n(e){return["behaviors_data",e.behaviorQuery,"items"]}function i(t){return e.has(t,"behaviors_data")}function r(t,r,o){var a=JSON.stringify(t);i(o)?e.set(o,n(r),a):r.behaviors=a}function o(t,o){var a=[],s=function(t,r){return i(r)?e.get(r,n(t),"[]"):t.behaviors||"[]"}(t,o),u=JSON.parse(s);if(e.isEmpty(u))i(o)?delete t.behaviorQuery:delete t.behaviors;else{if(e.isArray(u)){var c=!1;return e.forEach(u,function(n){var i=e.get(n,"action.sourceId");i&&i!==t.id&&(n.action.sourceId=t.id,c=!0)}),void(c&&r(u,t,o))}e.forEach(u,function(t,n){e.forEach(t,function(t,i){e.forEach(t,function(t){var r=e.assign({targetId:i,action:n},t);"screenIn"!==n&&"pageIn"!==n||(r.targetId=""),a.push(r)})})}),r(a,t,o)}}function a(t,n){e.forEach(t,function(e){o(e,n),e.components&&a(e.components,n)})}return{exec:function(e){t.exec(e);var n=e.structure;n&&(n.components&&a(n.components,e.data),n.mobileComponents&&a(n.mobileComponents,e.data),n.children&&a(n.children,e.data))}}}),define("dataFixer/plugins/connectionsDataFixer",["lodash"],function(e){"use strict";return{exec:function(t){var n=e.get(t,"data");n.connections_data=n.connections_data||{}}}}),define("dataFixer/plugins/fiveGridLineLayoutFixer",["lodash"],function(e){"use strict";function t(i){e.forEach(i,function(i){if(e.has(n,i.skin)){var r=n[i.skin];i.layout=e.mapValues(i.layout,function(e,t){return r[t]?Math.max(e,r[t]):e})}i.components&&t(i.components)})}var n={"wysiwyg.viewer.skins.line.FadeLine":{width:90},"wysiwyg.viewer.skins.line.FadeNotchBottomLine":{width:60},"wysiwyg.viewer.skins.line.FadeNotchTopLine":{width:60},"wysiwyg.viewer.skins.line.ShadowBottomLine":{width:200},"wysiwyg.viewer.skins.line.ShadowTopLine":{width:200}};return{exec:function(e){var n=e.structure;n&&(n.components&&t(n.components),n.children&&t(n.children),n.mobileComponents&&t(n.mobileComponents))}}}),define("dataFixer/plugins/toPageAnchorsFixer",["lodash"],function(e){"use strict";return{exec:function(t){var n=t.structure;if(n&&n.components&&!e.isEmpty(n.components)&&function(t){var n=e.head(t);return!!e.get(n,"layout.anchors")}(n.components)){var i=e.maxBy(n.components,function(t){var n=-1*Number.MAX_VALUE;return t.layout&&e.isNumber(t.layout.y)&&e.isNumber(t.layout.height)&&(n=t.layout.y+t.layout.height),n}),r=void 0;i.layout&&i.layout.anchors&&(r=e.find(i.layout.anchors,{type:"BOTTOM_PARENT"})),r||(i.layout=i.layout||{},i.layout.anchors=i.layout.anchors||[],i.layout.anchors.push({distance:0,type:"BOTTOM_PARENT",targetComponent:t.structure.id,locked:!0,originalValue:t.structure.layout.height,topToTop:i.layout.y}))}}}}),define("dataFixer/helpers/anchorCyclesHelper",["lodash"],function(e){"use strict";function t(e){return e&&e.layout&&e.layout.y+e.layout.height}function n(e){return e.layout&&e.layout.anchors||[]}function i(e){return e.type===a.BOTTOM_BOTTOM||e.type===a.BOTTOM_TOP}function r(t,o,a,s){if(s[o.id])return!1;s[o.id]=!0;var u=n(o);return u=e.filter(u,i),e.some(u,function(e){return e.targetComponent===t.id||r(t,a[e.targetComponent],a,s)})}function o(s){if(!e.isEmpty(s)){var u=e.keyBy(s,"id");e.forEach(s,function(s){var c=n(s);e.remove(c,function(n){return i(n)&&function(n,i,r){var o=void 0;switch(n.type){case a.BOTTOM_BOTTOM:o=t(r);break;case a.BOTTOM_TOP:o=e.get(r,"layout.y");break;default:return!1}return!e.isUndefined(o)&&o-t(i)<0}(n,s,u[n.targetComponent])&&r(s,u[n.targetComponent],u,{})}),o(s.components)})}}var a={BOTTOM_BOTTOM:"BOTTOM_BOTTOM",BOTTOM_TOP:"BOTTOM_TOP"};return{fixBottomTopBottomBottomCycles:o}}),define("dataFixer/plugins/wrongAnchorsFixer",["lodash","dataFixer/helpers/anchorCyclesHelper"],function(e,t){"use strict";function n(e){d[e.componentType]&&(e.layout.anchors=[])}function i(e){return e.layout&&e.layout.y+e.layout.height}function r(e){return e.layout&&e.layout.anchors||[]}function o(t,n,a,s,u){if(!(u[t.id]||i(t)>a)){u[t.id]=!0;var c=r(t);e.remove(c,function(e){if(e.targetComponent===n.id)return!0;if("BOTTOM_PARENT"!==e.type){if(!s[e.targetComponent])return!0;o(s[e.targetComponent],n,a,s,u)}return!1})}}function a(t,n,i){var r=n.id,o=i[t.targetComponent];if("BOTTOM_PARENT"===t.type&&(o=t.targetComponent===r?n:null),!o)return!1;if("BOTTOM_BOTTOM"===t.type&&p[o.componentType])return!1;if("BOTTOM_PARENT"!==t.type&&(d[o.componentType]||"wysiwyg.viewer.components.HeaderContainer"===o.componentType&&o.layout&&!0===o.layout.fixedPosition))return!1;var a=void 0;if(o.layout&&e.isNumber(o.layout.height)&&e.isNumber(o.layout.y)){var s=o.layout,u=function(e,t,n){var i=(n||0)*Math.PI/180;return parseInt(Math.abs(t*Math.sin(i))+Math.abs(e*Math.cos(i)),10)}(s.height,s.width,s.rotationInDegrees),c=function(e,t,n){return parseInt(e-(n-t)/2,10)}(s.y,s.height,u);a="BOTTOM_PARENT"===t.type||"BOTTOM_BOTTOM"===t.type?u:c}else a=0;return t.originalValue=Math.min(t.originalValue,a),!0}function s(e,t){return function(e,t){!!t&&n(e)}(e,t),u(e,t)}function u(t,s){var c=s?t[s]:t.components;if(!e.isEmpty(c)){var p=e.transform(c,function(e,t){e[t.id]=t},{});!function(t){e.forEach(t,function(n){var i=r(n);i=e.reject(i,{type:"BOTTOM_PARENT"}),e.remove(i,function(n){return!e.some(t,{id:n.targetComponent})})})}(c),e.forEach(c,function(s){var c=r(s);!function(t){e.remove(t,function(e){return null===e.distance||isNaN(e.distance)})}(c),n(s),function(t,n){"Document"===t.type&&e.forEach(n,function(e){"SITE_STRUCTURE"===e.targetComponent&&(e.targetComponent="masterPage")})}(t,c),function(t,n,i){n=e.reject(n,{type:"BOTTOM_PARENT"}),e.forEach(n,function(n){var o=i[n.targetComponent];if(o){var a=e.filter(r(o),{targetComponent:t.id,type:n.type});e.forEach(a,function(i){var r=t.layout.y<o.layout.y?o:t,a=t.layout.y<o.layout.y?i:n;e.remove(r.layout.anchors,function(e){return e===a})})}})}(s,c,p),e.remove(c,function(n){!function(e){"TOP_TOP"===e.type&&(e.locked=!0)}(n);var u=a(n,t,p);return u&&function(t,n,a){if("BOTTOM_TOP"===t.type){var s=r(a[t.targetComponent]);e.remove(s,{targetComponent:n.id});var u=e.filter(s,{type:"TOP_TOP"}),c=i(n)+10;e.forEach(u,function(e){a[e.targetComponent]&&o(a[e.targetComponent],n,c,a,{})})}}(n,s,p),!u}),u(s)})}}function c(t){var n=e.head(t);return!!e.get(n,"layout.anchors")}var p={"wysiwyg.common.components.anchor.viewer.Anchor":!0,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":!0,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":!0,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":!0,"wixapps.integration.components.AppPart":!0,"wixapps.integration.components.AppPart2":!0,"wixapps.integration.components.common.minipart":!0,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":!0,"wysiwyg.common.components.weather.viewer.Weather":!0,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":!0,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":!0,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":!0,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":!0,"wysiwyg.viewer.components.ContactForm":!0,"wysiwyg.viewer.components.FacebookShare":!0,"wysiwyg.viewer.components.FiveGridLine":!0,"wysiwyg.viewer.components.FlickrBadgeWidget":!0,"wysiwyg.viewer.components.ItunesButton":!0,"wysiwyg.viewer.components.LinkBar":!0,"wysiwyg.viewer.components.PayPalButton":!0,"wysiwyg.viewer.components.PinterestFollow":!0,"wysiwyg.viewer.components.VKShareButton":!0,"wysiwyg.viewer.components.WFacebookComment":!0,"wysiwyg.viewer.components.WGooglePlusOne":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0},d={"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":!0,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":!0,"mobile.core.components.Page":!0,"wixapps.integration.components.AppPage":!0};return{exec:function(n){var i=n.structure,r="components";i&&("Document"===i.type&&((i=e.clone(n.structure)).id="masterPage",n.structure=i,r="children"),c(i[r])&&s(i,r),c(i.mobileComponents)&&(s(i,"mobileComponents"),t.fixBottomTopBottomBottomCycles(i.mobileComponents)))}}}),define("dataFixer/plugins/addMissingAnchorsOfMasterPage",["lodash"],function(e){"use strict";function t(e){if(!e.rotationInDegrees)return e.height;var t=function(e){return e*Math.PI/180}(e.rotationInDegrees);return parseInt(Math.abs(e.width*Math.sin(t))+Math.abs(e.height*Math.cos(t)),10)}function n(e){if(!e.rotationInDegrees)return e.y;var n=t(e);return parseInt(e.y-(n-e.height)/2,10)}function i(t){return e.maxBy(t,function(e){return n(e.layout)})}function r(r){if(r&&!e.isEmpty(r)&&!function(e){return!(e.length&&e[0].layout&&e[0].layout.anchors)}(r)){var o=function(t){var n={};return e.forEach(t,function(e){switch(e.id){case"SITE_HEADER":return n.header=e,!(n.footer&&n.pagesContainer);case"SITE_FOOTER":return n.footer=e,!(n.header&&n.pagesContainer);case"PAGES_CONTAINER":return n.pagesContainer=e,!(n.header&&n.footer);default:return!0}}),n}(r);!function(t){var n=t.pagesContainer,i=t.header;n&&i&&(e.remove(n.layout.anchors,{targetComponent:"SITE_HEADER",type:"TOP_TOP"}),e.remove(i.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:"TOP_TOP"}))}(o),function(r,o){var a=o.pagesContainer,s=o.header,u=o.footer,c=a&&a.components&&e.find(a.components,{id:"SITE_PAGES"});if(!c||!c.layout||c.layout.anchors&&0!==c.layout.anchors.length||(c.layout.anchors=[{distance:0,locked:!0,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]),a&&a.layout&&(!a.layout.anchors||0===a.layout.anchors.length)&&u&&u.layout&&!u.layout.fixedPosition&&(a.layout.anchors=[{distance:10,locked:!0,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}]),s&&!e.find(r,function(t){return e.find(t.layout.anchors,{type:"BOTTOM_PARENT",targetComponent:"masterPage"})})){var p=i(r);if(!p.layout.anchors)return;p.layout.anchors.push({distance:0,locked:!0,originalValue:n(p.layout)+t(p.layout)+(s?t(s.layout):0),targetComponent:"masterPage",type:"BOTTOM_PARENT"})}}(r,o)}}return{exec:function(e){var t=e.structure;t&&"Document"===t.type&&(r(t.children),r(t.mobileComponents))},test:{getBoundingHeight:t,getBoundingY:n,getLowestComp:i}}}),define("dataFixer/plugins/sitePagesFixer",["lodash"],function(e){"use strict";function t(t){e.isEmpty(t.components)||(t.components=[])}function n(e){e.layout&&(e.layout.y=0)}return{exec:function(i){if(i.structure&&"Document"===i.structure.type){var r=function(t){var n=void 0;if(t.structure.children){var i=e.find(t.structure.children,{id:"PAGES_CONTAINER"});i&&!e.isEmpty(i.components)&&(n=e.find(i.components,{id:"SITE_PAGES"}))}return n}(i),o=function(t){var n=void 0;if(t.structure.mobileComponents){var i=e.find(t.structure.mobileComponents,{id:"PAGES_CONTAINER"});i&&!e.isEmpty(i.components)&&(n=e.find(i.components,{id:"SITE_PAGES"}))}return n}(i);r&&(t(r),n(r)),o&&(t(o),n(o))}return i}}}),define("dataFixer/plugins/linkRefDataFixer",["lodash","coreUtils"],function(e,t){"use strict";return{exec:function(n){function i(i,o){var a=(i.linkType||"").toLowerCase(),u=o?function(){var t=e.keys(n.data.document_data),i=void 0;do{i=(new Date).getTime().toString(36)+"_"+Math.round(99999*Math.random()).toString(36),i=i.replace(/\s/g,"_")}while(t[i]);return i}():i.id;switch(a){case"page":return function(e,t){var n={};n.id=e,n.type="PageLink";var i=t.href;if(!i)return null;var o=i.lastIndexOf("/");o<0&&(o=i.lastIndexOf("|"));return i=i.substr(o+1),n.pageId=r(i),n}(u,i);case"website":return function(t,n){var i={};i.id=t,i.type="ExternalLink",i.target=function(t){var n=void 0,i=e.indexOf(s.oldValues,t);n=e.includes(s.newValues,t)?t:-1!==i?s.newValues[i]:s.newValues[1];return n}(n.target);var r=n.href;if(!r)return null;return i.url=r,i}(u,i);case"email":return function(e,n){var i={};i.id=e,i.type="EmailLink";var r=n.href;if(!r||!r.toLowerCase)return null;t.stringUtils.startsWith(r,"mailto:",!0)&&(r=r.substr("mailto:".length));var o=r.split("?");if(i.recipient=o[0],o[1]){var a=function(e){var t={},n=/([^&=]+)=([^&]*)/g,i=void 0;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(o[1]);a.subject&&(i.subject=a.subject),a.body&&(i.body=a.body)}return i}(u,i);case"document":return function(e,t){var n={},i=void 0;n.type="DocumentLink",n.id=e;var r=t.href;if(!r)return null;var o=(i=r.substr(r.lastIndexOf("/")+1)).indexOf("?dn=");-1!==o&&(i=i.substring(0,o));return n.docId=i,n.name=t.text,n}(u,i);case"login":return function(e,n){var i={};i.id=e,i.type="LoginToWixLink";var r=n.text;r&&t.stringUtils.startsWith(r,"{")&&(r=JSON.parse(r),i.postLoginUrl=r.postLoginUrl,i.postSignupUrl=r.postSignupUrl,i.dialog=r.type);return i}(u,i);case"admin_login":case"free_link":case"":default:return null}}function r(e){return e?e&&t.stringUtils.startsWith(e,"#")?e:"#"+e:null}var o={toFix:["FlashComponent","SiteButton","Image"],newNames:["LinkableFlashComponent","LinkableButton","Image"],originalLink:["TextLink","Link"]},a=["href","text","target","icon","linkType"],s={oldValues:["same","other"],newValues:["_self","_blank"]},u=n.data.document_data,c={},p=void 0;p=function(t){return e.filter(t,function(t){var n=!(t.type===o.toFix[2])||"2.0"!==t.metaData.schemaVersion;return!t.link&&e.includes(o.toFix,t.type)&&n})}(u),e.forEach(p,function(t){var n=function(t){var n=e.indexOf(o.toFix,t.type),s=o.newNames[n],u=e.defaults({type:s},e.omit(t,a)),p=i(t,!0);return p&&(u.link=r(p.id),c[p.id]=p),t.type===u.type&&(u.metaData.schemaVersion="2.0"),u}(t);n&&(u[t.id]=n)}),p=function(t){return e.filter(t,function(t){return t.linkType&&e.includes(o.originalLink,t.type)})}(u),e.forEach(p,function(e){var t=i(e);t&&(u[e.id]=t)}),e.assign(u,c)}}}),define("dataFixer/plugins/fromDocumentToThemeData",[],function(){"use strict";return{exec:function(e){var t=e.data;t.document_data.THEME_DATA&&(t.theme_data.THEME_DATA||(t.theme_data.THEME_DATA=t.document_data.THEME_DATA),delete t.document_data.THEME_DATA)}}}),define("dataFixer/plugins/tpaGluedWidgetDataFixer",["lodash"],function(e){"use strict";var t="wysiwyg.viewer.components.tpapps.TPAGluedWidget";return{exec:function(n){"masterPage"===e.get(n,"structure.id")&&function(n){e.forEach(n.structure.children,function(e){e.componentType===t&&(e.layout.fixedPosition=!0)})}(n)}}}),define("dataFixer/plugins/tpaAddChatAppDataFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(n,r){var s=e.find(n,{appDefinitionId:l});if(s){var u=o(r,s.applicationId);if(e.forEach(u,function(n){var i=n.data,o=e.keys(i.widgets);i.applicationId===s.applicationId&&e.includes(o,i.widgetId)||function(e,n,i){var r=t.guidUtils.getUniqueId("dataItem","-");n.dataQuery="#"+r,i.id=r,e.data.document_data[r]=i}(r,n.comp,e.assign(i,{applicationId:s.applicationId,widgetId:m}))}),!function(t){return!0===e.get(t,"permissions.revoked")}(s)&&!u.length){var c=e.get(s,"widgets."+m),p=a("comp","-"),d=a("dataItem","-"),g=a("propItem","-"),f=i(p,d,g,c);r.structure.children.push(f),r.data.document_data[d]=function(e,t){return{type:"TPAWidget",id:t,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:e.applicationId,widgetId:m}}(s,d),r.data.component_properties[g]=function(t){return{type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"},placement:e.get(t,"gluedOptions.placement"),verticalMargin:e.get(t,"gluedOptions.verticalMargin"),horizontalMargin:e.get(t,"gluedOptions.horizontalMargin")}}(c),r.data.theme_data[f.styleId]||(r.data.theme_data[f.styleId]=function(e){return{type:"TopLevelStyle",styleType:"system",compId:"",componentClassName:"wysiwyg.viewer.components.tpapps.TPAGluedWidget",pageId:"",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",style:{groups:{},properties:{},propertiesSource:{}},id:e,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}}(f.styleId))}}}function i(t,n,i,r,o){return{type:"Component",styleId:o||"tpagw0",id:t,dataQuery:"#"+n,skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:e.get(r,"defaultWidth")||320,height:e.get(r,"defaultHeight")||250,x:e.get(r,"x")||0,y:e.get(r,"y")||0,scale:1,rotationInDegrees:0,fixedPosition:e.get(r,"fixedPosition")||!0},propertyQuery:i,componentType:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"}}function r(e,t,n,r){return i(e,t=p(t),n=p(n),{x:10,y:10,width:0,height:5,fixedPosition:!1},r)}function o(t,n){return e(t.structure.children).filter(function(i){if(!i.dataQuery)return!1;var r=t.data.document_data[i.dataQuery.replace("#","")];return e.get(r,"widgetId")===m||e.get(r,"applicationId")===n}).map(function(e){return{comp:e,data:t.data.document_data[e.dataQuery.replace("#","")]}}).value()}function a(e,t){return function(e,t,n,i){t=t||"",n=n||"";var r=i;r===e.lastGeneratedId?e.counter++:(e.lastGeneratedId=r,e.counter=0);return t+n+Number(e.lastGeneratedId).toString(36)+(e.counter||"")}(f,e,t,Date.now())}function s(t,n){var i=e.find(n,{appDefinitionId:l}),a=o(t).length>0;if(t&&t.structure.id===g&&i&&!e.get(i,"permissions.revoked")&&a&&u(t.data,t.structure.children,i)&&!u(t.data,t.structure.mobileComponents,i)){!function(t,n){var i=t.structure.mobileComponents,o=e.find(i,{id:"SITE_FOOTER"}),a=n.dataQuery,s=n.propertyQuery,u=n.styleId;o&&e.isArray(o.components)?o.components.push(r(n.id,a,s,u)):i.push(r(n.id,a,s,u))}(t,c(t.data.document_data,t.structure.children,i))}}function u(e,t,n){return!!c(e.document_data,t,n)}function c(t,n,i){for(var r=[].concat(n);!e.isEmpty(r);){var o=r.shift();if(o.componentType===d){var a=t[p(o.dataQuery)];if(Number(a.applicationId)===Number(i.applicationId))return o}e.isEmpty(o.components)||(r=r.concat(o.components))}return null}function p(e){return e&&"#"===e[0]?e.substr(1):e}var d="wysiwyg.viewer.components.tpapps.TPAGluedWidget",l="14517e1a-3ff0-af98-408e-2bd6953c36a2",m="14517f3f-ffc5-eced-f592-980aaa0bbb5c",g="masterPage",f={lastGeneratedId:void 0,counter:0};return{exec:function(t,i,r,o,a,u,c,p){var d=e.get(p,"clientSpecMap");if("masterPage"===t.structure.id){n(d,t);var l=e.get(p,"quickActionsMenuEnabled");e.get(t,"structure.id")!==g||l||s(t,d)}}}}),define("dataFixer/plugins/tpaProGalleryBackgroundDataFixer",["lodash"],function(e){"use strict";function t(t,n,i){var r=e.get(t,"pageBackgrounds."+i+".ref");r=e.replace(r,"#","");var o=e.get(n,["data","document_data",r]);o&&e.merge(o,{type:"BackgroundMedia",color:"transparent",alignType:"center",fittingType:"fill",scrollType:"none",mediaRef:null})}function n(n,i){if("masterPage"===e.get(n,"structure.id")){var u=e.get(n,"data.document_data"),c=e.find(u,{tpaApplicationId:i,tpaPageId:o});c&&(t(c,n,"desktop"),t(c,n,"mobile"))}else!function(t){var n=e.get(t,["structure","components"]),i=e.find(n,{componentType:s});if(i){var o=i.dataQuery.replace("#","");e.get(t,["data","document_data",o,"widgetId"])===r&&(t.structure.styleId=a)}}(n)}var i="14271d6f-ba62-d045-549b-ab972ae1f70e",r="144f04b9-aab4-fde7-179b-780c11da4f46",o="fullscreen_page",a="non_existing_style_id",s="wysiwyg.viewer.components.tpapps.TPAMultiSection";return{exec:function(r,s,u,c,p,d,l,m){var g=function(t){var n=e.find(t,{appDefinitionId:i});return e.get(n,"applicationId")}(m.clientSpecMap);g&&(m.isViewerMode?function(n,i){var r=e.get(n,"structure.id"),s=e.get(n,["data","document_data",r]),u=e.get(s,"tpaPageId"),c=e.get(s,"tpaApplicationId");u===o&&c===i&&(t(s,n,"desktop"),t(s,n,"mobile"),n.structure.styleId=a)}(r,g):m.isExperimentOpen("se_proGalleryBGDataFixer")&&n(r,g))}}}),define("dataFixer/imageService/imageTransformDataFixers",["lodash","coreUtils"],function(e,t){"use strict";function n(e){return(e||"").toLowerCase().trim()}var i=t.imageClientApi.fittingTypes,r=t.imageClientApi.alignTypes,o={"repeat-x":i.TILE_HORIZONTAL,"repeat no_repeat":i.TILE_HORIZONTAL,"repeat no-repeat":i.TILE_HORIZONTAL,"repeat-y":i.TILE_VERTICAL,"no_repeat repeat":i.TILE_VERTICAL,"no-repeat repeat":i.TILE_VERTICAL,repeat:i.TILE,"repeat repeat":i.TILE,"":""};Object.freeze(o);var a={auto:function(e){return e||i.LEGACY_ORIGINAL_SIZE},cover:function(){return i.SCALE_TO_FILL},contain:function(e){return e?i.FIT_AND_TILE:i.SCALE_TO_FIT},"":function(){return i.SCALE_TO_FILL}};Object.freeze(a);var s={"center center":r.CENTER,center:r.CENTER,"50% 50%":r.CENTER,"top center":r.TOP,"center top":r.TOP,"50% 0%":r.TOP,"bottom center":r.BOTTOM,"center bottom":r.BOTTOM,"50% 100%":r.BOTTOM,"center right":r.RIGHT,"right center":r.RIGHT,"100% 50%":r.RIGHT,"center left":r.LEFT,"left center":r.LEFT,"0% 50%":r.LEFT,"left top":r.TOP_LEFT,"top left":r.TOP_LEFT,"0% 0%":r.TOP_LEFT,"right top":r.TOP_RIGHT,"top right":r.TOP_RIGHT,"100% 0%":r.TOP_RIGHT,"left bottom":r.BOTTOM_LEFT,"bottom left":r.BOTTOM_LEFT,"0% 100%":r.BOTTOM_LEFT,"right bottom":r.BOTTOM_RIGHT,"bottom right":r.BOTTOM_RIGHT,"100% 100%":r.BOTTOM_RIGHT,"":r.CENTER};Object.freeze(s);var u=function(){var e={};return e[i.LEGACY_STRIP_TILE_HORIZONTAL]="repeat-x",e[i.TILE_HORIZONTAL]="repeat-x",e[i.LEGACY_STRIP_TILE_VERTICAL]="repeat-y",e[i.TILE_VERTICAL]="repeat-y",e[i.LEGACY_STRIP_TILE]="repeat",e[i.TILE]="repeat",e[i.FIT_AND_TILE]="repeat",e[""]="no-repeat",e}();Object.freeze(u);var c=function(){var e={};return e[i.LEGACY_ORIGINAL_SIZE]="auto",e[i.LEGACY_STRIP_ORIGINAL_SIZE]="auto",e[i.SCALE_TO_FILL]="cover",e[i.LEGACY_STRIP_SCALE_TO_FILL]="cover",e[i.SCALE_TO_FIT]="contain",e[i.LEGACY_STRIP_SCALE_TO_FIT]="contain",e[i.FIT_AND_TILE]="contain",e[i.LEGACY_STRIP_FIT_AND_TILE]="contain",e[""]="auto",e}();Object.freeze(c);var p=function(){var e={};return e[r.TOP]="center top",e[r.CENTER]="center",e[r.BOTTOM]="center bottom",e[r.TOP_LEFT]="left top",e[r.LEFT]="left center",e[r.BOTTOM_LEFT]="left bottom",e[r.TOP_RIGHT]="right top",e[r.RIGHT]="right center",e[r.BOTTOM_RIGHT]="right bottom",e[""]="center",e}();return Object.freeze(p),{cssToFittingType:function(e){var t=n(e.bgRepeat),i=n(e.bgSize),r=o[t];return a[i]&&a[i](r)},cssToAlignType:function(e){return e=n(e),s[e]},fittingTypeToBgRepeat:function(e){return u[e]||u[""]},fittingTypeToBgSize:function(e){return c[e]||c[""]},alignTypeToBgPosition:function(e){return p[e]||p[""]},migrateToLegacyFittings:function(e){return e===i.TILE?i.LEGACY_STRIP_TILE:e===i.TILE_HORIZONTAL?i.LEGACY_STRIP_TILE_HORIZONTAL:e===i.TILE_VERTICAL?i.LEGACY_STRIP_TILE_VERTICAL:e===i.SCALE_TO_FILL?i.LEGACY_STRIP_SCALE_TO_FILL:e===i.SCALE_TO_FIT?i.LEGACY_STRIP_SCALE_TO_FIT:e===i.FIT_AND_TILE?i.LEGACY_STRIP_FIT_AND_TILE:e===i.LEGACY_ORIGINAL_SIZE?i.LEGACY_STRIP_ORIGINAL_SIZE:e}}}),define("dataFixer/plugins/compsWithImagesDataFixer",["lodash","dataFixer/imageService/imageTransformDataFixers"],function(e,t){"use strict";var n={BgImageStripProperties:function(e){e.fittingType=t.cssToFittingType({bgSize:e.bgSize,bgRepeat:e.bgRepeat}),e.fittingType=t.migrateToLegacyFittings(e.fittingType),e.alignType=t.cssToAlignType(e.bgPosition),e.type="BgImageStripUnifiedProperties",delete e.bgSize,delete e.bgRepeat,delete e.bgPosition,delete e.bgUrl}};return{exec:function(t){var i=t.data.component_properties;e.isEmpty(i)||function(t){e.forEach(t,function(e){var t=n[e.type];t&&t(e)})}(i)}}}),define("dataFixer/plugins/appPartCustomizationsFixer",["lodash"],function(e){"use strict";var t={faq:{filterAppPart:{appPartName:"f2c4fc13-e24d-4e99-aadf-4cff71092b88",viewName:"ExpandQuestions"},filterAppLogicCustomization:{type:"AppPartCustomization",forType:"Category",view:"ToggleMobile",key:"comp.initialState",fieldId:"toggle",format:"Mobile"},modify:function(t){return e.assign(t,{fieldId:"vars",key:"initialState"})}}};return{exec:function(n){e(t).values().forEach(function(t){e(n.data.document_data).filter(t.filterAppPart).forEach(function(n){n.appLogicCustomizations=e(n.appLogicCustomizations).map(function(n){return e.find([n],t.filterAppLogicCustomization)?t.modify(n):n}).compact().value()})})}}}),define("dataFixer/plugins/backgroundMediaConverter",["lodash","dataFixer/imageService/imageTransformDataFixers","coreUtils"],function(e,t,n){"use strict";function i(t,i){var o=e.filter(t,function(e){return"Page"===e.type||"AppPage"===e.type}),u=e.map(o,"id");if(e.some(o,function(e){return e.pageBackgrounds&&e.pageBackgrounds.desktop.ref}))r(t);else{!function(t,i,r,o){var u=s(i),c=s(r);e.forEach(o,function(e){var i=n.guidUtils.getUniqueId(m,g),r=n.guidUtils.getUniqueId(m,g),o=i.replace(m,l),s=r.replace(m,l);a(t,u,e,i,o,"desktop"),a(t,c,e,r,s,"mobile")})}(t,i.siteBg,i.mobileBg&&"[siteBg]"!==i.mobileBg?i.mobileBg:i.siteBg,u)}}function r(t){var i=e.filter(t,{type:d});e.forEach(i,function(e){!function(e,t){var i=t.id,r=n.guidUtils.getUniqueId(l+g),a=function(e){return c(u.apply(this,[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData]))}(t);o(e,a,i,r)}(t,e)})}function o(t,n,i,r){t[i]=e.assign({id:i},n.bgItem),n.imageItem&&(t[i].mediaRef="#"+r,t[r]=e.assign({id:r},n.imageItem))}function a(e,t,n,i,r,a){e[n].pageBackgrounds=e[n].pageBackgrounds||{desktop:"",mobile:""},e[n].pageBackgrounds[a]={ref:"#"+i,custom:!0,isPreset:!1},o(e,t,i,r)}function s(t){return c(u.apply(this,e.compact(t.split(" "))))}function u(e,t,n,i,r,o,a,s,u,c,p){return p=p||{},{imageId:e,imageW:t,imageH:n,x:i,y:r,width:o,repeatX:a,repeatY:s,attachment:u,color:c,metaData:{isPreset:p.isPreset||!1,schemaVersion:"2.0",isHidden:p.isHidden||!1}}}function c(e){var i={bgItem:{}},r="rgb(255,255,255)",o=t.cssToAlignType(e.x+" "+e.y),a=t.cssToFittingType({bgRepeat:e.repeatX+" "+e.repeatY,bgSize:e.width}),s="fixed"===e.attachment?"fixed":"scroll";return a=function(e){var t={};return t[n.imageUtils.fittingTypes.TILE]=n.imageUtils.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[n.imageUtils.fittingTypes.TILE_HORIZONTAL]=n.imageUtils.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[n.imageUtils.fittingTypes.TILE_VERTICAL]=n.imageUtils.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[n.imageUtils.fittingTypes.LEGACY_ORIGINAL_SIZE]=n.imageUtils.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}(a),e.color&&"none"!==e.color&&(r=e.color),e.imageId&&"none"!==e.imageId&&(i.imageItem={type:"Image",uri:e.imageId,width:parseInt(e.imageW,10),height:parseInt(e.imageH,10),metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}),i.bgItem={type:"BackgroundMedia",color:r,alignType:o,fittingType:a,scrollType:s,metaData:e.metaData},i}function p(t){var n=e.compact(t.split(" ")),i=u.apply(this,n).color;return i&&(i=(i=i.replace("[","{")).replace("]","}"),n[9]=i),n.join(" ")}var d="BackgroundImage",l="bgImage",m="mediaBg",g="-";return{exec:function(t){if(t.structure){var n=t.data.theme_data&&t.data.theme_data.THEME_DATA,o=t.data.document_data,a=e.some(o,{type:"BackgroundMedia"}),s=e.some(o,{type:d});a&&!s||("Document"===t.structure.type?(!function(e){e.siteBg=p(e.siteBg),e.mobileBg&&"[siteBg]"!==e.mobileBg&&(e.mobileBg=p(e.mobileBg))}(n),i(o,n)):function(e){r(e)}(o))}}}}),define("dataFixer/plugins/backgroundMediaUndefinedFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(e,n){return t.guidUtils.getUniqueId(n.id,"_")+e}function i(t,n){n[t]=e.assign({id:t},r)}var r={alignType:"center",color:"{color_11}",fittingType:"fill",scrollType:"scroll",type:"BackgroundMedia"},o={pageBackgrounds:{desktop:{custom:!0,isPreset:!0,ref:null},mobile:{custom:!0,isPreset:!0,ref:null}}};return{exec:function(t){if(t.structure){var r=t.data.document_data;e.some(r,{type:"BackgroundMedia"})&&function(t){var r=e.filter(t,function(e){return"Page"===e.type||"AppPage"===e.type});e.forEach(r,function(r){var a=void 0;e.defaults(r,o),r.pageBackgrounds.mobile.ref||(i(a=n("_mobile_bg",r),t),r.pageBackgrounds.mobile.ref="#"+a),r.pageBackgrounds.desktop.ref||(i(a=n("_desktop_bg",r),t),r.pageBackgrounds.desktop.ref="#"+a)})}(r)}}}}),define("dataFixer/plugins/backgroundMediaRefDuplicationFixer",["lodash"],function(e){"use strict";function t(t,n,i,r,o){if(0!==t[n].indexOf("#"+r)){var a=e.cloneDeep(o[t[n].replace("#","")]),s=function(e,t,n){return e+"_"+t+"_"+n}(r,i,n);!function(t,n,i){i[t]=e.assign({id:t},e.omit(n,"id"))}(s,a,o),t[n]="#"+s}}function n(e,n,i){var r=i[n.pageBackgrounds[e].ref.replace("#","")],o=void 0;r&&r.mediaRef&&("WixVideo"===(o=i[r.mediaRef.replace("#","")]).type&&t(o,"posterImageRef",e,n.id,i),r.imageOverlay&&t(r,"imageOverlay",e,n.id,i),t(r,"mediaRef",e,n.id,i))}return{exec:function(t){if(t.structure){var i=t.data.document_data,r=e.filter(i,function(e){return"Page"===e.type||"AppPage"===e.type});e.forEach(r,function(e){!function(e,t){e.pageBackgrounds&&(n("mobile",e,t),n("desktop",e,t))}(e,i)})}}}}),define("dataFixer/plugins/stripContainerBgEffectFixer",["lodash","dataFixer/helpers/behaviorsMigrationHelper"],function(e,t){"use strict";function n(t,n){var i=e.get(n,[t.behaviorQuery,"items"],"[]");return JSON.parse(i)}function i(e,t){return t[t[e.designQuery.replace("#","")].background.replace("#","")]}function r(o,u,c){e.forEach(o,function(o){!function(r,o,u){var c=void 0;if(e.includes(a,r.componentType)){var p=i(r,o),d=p.scrollType;if(p.scrollType="none","scroll"!==d&&"none"!==d){c=n(r,u),(c=e.reject(c,{name:"ContainerFixedBg",action:"bgScrub"})).push(s[d]);var l=JSON.stringify(c);if(r.behaviorQuery)e.set(u,[r.behaviorQuery,"items"],l);else{var m=t.createBehaviorsDataItem(l);e.set(u,m.id,m),r.behaviorQuery=m.id}}}}(o,u,c),o.components&&r(o.components,u,c)})}function o(t,r,s){e.forEach(t,function(t){!function(t,r,o){var s=void 0;e.includes(a,t.componentType)&&(i(t,r).scrollType="none",s=n(t,o),s=e.reject(s,{name:"ContainerFixedBg",action:"bgScrub"}),e.isEmpty(s)?(delete t.behaviors,delete t.behaviorQuery):e.set(o,[t.behaviorQuery,"items"],JSON.stringify(s)))}(t,r,s),t.components&&o(t.components,r,s)})}var a=["wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripContainerSlideShowSlide"],s={fixed:{action:"bgScrub",name:"BackgroundReveal",duration:1,delay:0},parallax:{action:"bgScrub",name:"BackgroundParallax",duration:1,delay:0}};return{exec:function(e){var t=e.structure;if(t){var n=e.data.design_data,i=e.data.behaviors_data;t.components&&r(t.components,n,i),t.children&&r(t.children,n,i),t.mobileComponents&&o(t.mobileComponents,n,i)}}}}),define("dataFixer/plugins/documentMediaFixer",["lodash"],function(e){"use strict";return{exec:function(t){if("Page"===t.structure.type){var n=t.structure.components,i=t.data.document_data;e.forEach(n,function(t){if(e.includes(t.componentType,"DocumentMedia")){var n=t.dataQuery,r=i[n.replace("#","")];0===r.uri.indexOf("media/")&&(r.uri=r.uri.replace("media/",""))}})}return t}}}),define("dataFixer/plugins/pinterestFollowFixer",["lodash"],function(e){"use strict";var t=function(t){t.urlChoice=e.includes(t.urlChoice,"pinterest.com")?t.urlChoice:"www.pinterest.com/"+t.urlChoice};return{exec:function(n){return e(n.data.document_data).pickBy({type:"PinterestFollow"}).mapValues(t).value()}}}),define("dataFixer/plugins/blogPageMenuFixer",["lodash"],function(e){"use strict";function t(t){var n=function(t){var n=e.findKey(t,function(e){return e.appPageId&&"7326bfbb-4b10-4a8e-84c1-73f776051e10"===e.appPageId});if(!n)return null;var i=e.findKey(t,function(e){return e.pageId&&e.pageId==="#"+n});return e.findKey(t,function(e){return e.link&&e.link==="#"+i})}(t);n&&function(t,n){var i=t.CUSTOM_MAIN_MENU&&t.CUSTOM_MAIN_MENU.items;e.forEach(i,function(i){var r=t[i.replace("#","")].items,o=e.indexOf(r,n);if(-1!==o)return r.splice(o,1),t.CUSTOM_MAIN_MENU.items.push(n),!1})}(t,"#"+n)}return{exec:function(e){return e.structure&&"Document"===e.structure.type&&t(e.data.document_data),e}}}),define("dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer",["lodash","coreUtils"],function(e,t){"use strict";var n={exec:function(i){i.data&&i.data.document_data&&e(i.data.document_data).filter(function(e){return n.isAppPartType(e.type)}).forEach(function(n){e(n.appLogicCustomizations).compact().groupBy("view").filter(function(e,n){return t.appPartMediaInnerViewNameUtils.isMediaInnerViewName(n)}).forEach(function(t){e(t).groupBy("fieldId").filter(function(t){return e.isEqual(e.map(t,"format"),[""])}).forEach(function(t){e.forEach(t,function(e){e.format="*"})})})})},isAppPartType:function(e){return"AppPart"===e}};return n}),define("dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer",["lodash","coreUtils"],function(e,t){"use strict";var n={exec:function(t){t.data&&e(t.data.document_data).filter(function(t){return t.type===n.getAppPartType()&&e.includes(n.getBlogFeedAppPartNames(),t.appPartName)}).forEach(function(t){var i=t.appLogicCustomizations;e(i).compact().filter(function(t){return t.fieldId===n.getReadMoreValueCustomizationFieldId()&&t.key===n.getReadMoreValueCustomizationKey()&&""===t.format&&e.includes(n.getAffectedReadMoreValueCustomizationViews(),t.view)}).forEach(function(t){e.remove(i,{fieldId:t.fieldId,format:"*",key:t.key,view:t.view}),t.format="*"})})},getAppPartType:function(){return"AppPart"},getBlogFeedAppPartNames:function(){return[t.blogAppPartNames.FEED,t.blogAppPartNames.CUSTOM_FEED]},getReadMoreValueCustomizationFieldId:function(){return"ReadMoreBtn"},getReadMoreValueCustomizationKey:function(){return"value"},getAffectedReadMoreValueCustomizationViews:function(){return["MediaLeft","MediaLeftPage","MediaRight","MediaRightPage","MediaZigzag","MediaZigzagPage","Masonry","MasonryPage"]}};return n}),define("dataFixer/plugins/appPartTagsValueCustomizationFormatFixer",["lodash"],function(e){"use strict";return{exec:function(t){e(t.data.document_data).filter({type:"AppPart"}).forEach(function(t){e(t.appLogicCustomizations).filter({fieldId:"tagsValue",forType:"Post",format:"",key:"value",view:"SinglePostMediaTop"}).forEach(function(e){e.format="*"})})}}}),define("dataFixer/plugins/appPartDuplicateCustomizationFixer",["lodash"],function(e){"use strict";function t(t){var n=e.omit(t,"value");return JSON.stringify(n)}return{exec:function(n){e(n.data.document_data).filter({type:"AppPart"}).forEach(function(e){for(var n=e.appLogicCustomizations,i=n.length,r={};i;){var o=t(n[i-=1]);r[o]?n.splice(i,1):r[o]=!0}})}}}),define("dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(t){return"Array"===t.forType&&"comp.itemsPerPage"===t.key&&e.includes(["","*"],t.format)&&e.includes(["paginatedlist","columnBlog"],t.fieldId)&&e.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry"],t.view)}return{exec:function(i){e(i.data.document_data).filter({type:"AppPart",appPartName:t.blogAppPartNames.CUSTOM_FEED}).forEach(function(t){e(t.appLogicCustomizations).filter(n).forEach(function(t){e.assign(t,{fieldId:"vars",format:"*",key:"itemsPerPage"})})})}}}),define("dataFixer/plugins/blogDateAndAuthorHiddenCustomizationFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(t){return"Post"===t.forType&&"comp.hidden"===t.key&&("date"===t.fieldId||"author"===t.fieldId)&&e.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],t.view)}return{exec:function(i){e(i.data.document_data).filter(function(n){return"AppPart"===n.type&&e.includes([t.blogAppPartNames.CUSTOM_FEED,t.blogAppPartNames.FEED,t.blogAppPartNames.SINGLE_POST],n.appPartName)}).forEach(function(t){e(t.appLogicCustomizations).filter(n).forEach(function(t){e.assign(t,{fieldId:"dateAndAuthor"})})})}}}),define("dataFixer/plugins/blogDateAlignmentCustomizationFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(t){return"Post"===t.forType&&"layout.spacerBefore"===t.key&&"date"===t.fieldId&&e.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],t.view)}return{exec:function(i){e(i.data.document_data).filter(function(n){return"AppPart"===n.type&&e.includes([t.blogAppPartNames.CUSTOM_FEED,t.blogAppPartNames.FEED,t.blogAppPartNames.SINGLE_POST],n.appPartName)}).forEach(function(t){e(t.appLogicCustomizations).filter(n).forEach(function(t){e.assign(t,{fieldId:"vars",key:"dateAndAuthorPosition",value:"0"===t.value?"left":"right"})})})}}}),define("dataFixer/plugins/appPartBrokenButtonStyleFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=null;return{exec:function(i){e.isNull(n)&&(n=[],e.forEach(i.data.theme_data,function(t,i,r){e.matches({componentClassName:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.AppPartSkin"})(t)&&(n.push(i),delete r[i])}),setTimeout(function(){n=null})),e(i.data.document_data).filter(function(n){return"AppPart"===n.type&&e.includes(t.blogAppPartNames,n.appPartName)}).forEach(function(t){e.remove(t.appLogicCustomizations,function(t){return"comp.style"===t.key&&e.includes(n,t.value)})})}}}),define("dataFixer/plugins/blogDateFormatCustomizationFormatFixer",["lodash","coreUtils"],function(e,t){"use strict";var n={};return n[t.blogAppPartNames.FEED]=["MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],n[t.blogAppPartNames.POSTS_LIST]=["PostsList","PostsListMediaLeft"],n[t.blogAppPartNames.TICKER]=["TickerMediaBottom","TickerMediaTop"],{exec:function(i){e(i.data.document_data).filter(function(n){return"AppPart"===n.type&&e.includes([t.blogAppPartNames.FEED,t.blogAppPartNames.POSTS_LIST,t.blogAppPartNames.TICKER],n.appPartName)}).forEach(function(t){e(t.appLogicCustomizations).filter(function(i){return"date"===i.fieldId&&"Post"===i.forType&&!i.format&&"comp.format"===i.key&&e.includes(n[t.appPartName],i.view)}).forEach(function(e){e.format="*"})})}}}),define("dataFixer/plugins/contactFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["addressFieldLabel","emailFieldLabel","errorMessage","messageFieldLabel","nameFieldLabel","phoneFieldLabel","subjectFieldLabel","submitButtonLabel","successMessage","validationErrorMessage"];return{exec:function(i,r,o,a,s,u,c){var p=i.data.document_data;if("Template"===e.get(c,"siteInfo.documentType")){!function(i,r){if(e.includes(t.languages,r)){var o=t.translationsLoader.getTranslationAllKeys("contactFormTranslations",r);o&&e.forOwn(i,function(t){"ContactForm"===t.type&&e.forEach(n,function(e){t[e]=o[e]||t[e]})})}}(p,t.wixUserApi.getLanguage(o.cookie,a,o.language)),function(t){e.forOwn(t,function(e){"ContactForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))})}(p)}}}}),define("dataFixer/plugins/contactFormMigrationDataFixer",["lodash"],function(e){"use strict";function t(e){return(e||"").replace("#","")}function n(n){var i=this,r=t(n.dataQuery),l=t(n.propertyQuery),m=this.pageJson.data.document_data[r],g=function(n,i){return!e.has(i.data.component_properties,t(n.propertyQuery))&&n.componentType===p}(n,this.pageJson)?o:this.pageJson.data.component_properties[l];e.set(n,"componentType",d),e.unset(n,"propertyQuery"),e.assign(this.pageJson.data.document_data[r],{type:c,dynamicFields:function(t,n,i){var r=e.startsWith(t,s.skinPrefix)?s.fields:u.fields;return e.reduce(r,function(t,r){var o=r+"FieldLabel",s=i["hidden_"+o];if(s){var u=function(e){switch(e){case"email":return{fieldType:"email",fieldInputType:"email"};case"phone":return{fieldType:"phone",fieldInputType:"tel"};default:return{fieldType:e,fieldInputType:"text"}}}(r);t.push({name:u.fieldType,inputType:u.fieldInputType,displayLabel:n[o]||e.get(a[o],"default"),required:i["required_"+o],isDisplayed:s})}return t},[])}(n.skin,m,g)}),["name","email","subject","phone","address","message"].forEach(function(t){e.unset(i.pageJson.data.document_data,[r,t+"FieldLabel"])}),e.unset(this.pageJson.data.component_properties,l)}function i(r){var o=this;r&&e.forEach(r,function(r){r.componentType===p&&n.call(o,r),r.componentType===d&&function(n){var i=t(n.propertyQuery);e.unset(n,"propertyQuery"),e.unset(this.pageJson.data.component_properties,[i])}.call(o,r),i.call(o,r.components)})}function r(t,n,r,o,a,s,u,c){var p=t.structure;if(function(t,n){var i=t.experiments;return(e.includes(i,"sv_contactFormTemplatesMigration")||e.includes(i,"sv_contactFormFinalMigration"))&&!!n}(c,p)){var d=e.concat([],p.components||p.children,p.mobileComponents||[]);i.call({pageJson:t},d)}}var o={type:"ContactFormProperties",hidden_emailFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_addressFieldLabel:!1,hidden_subjectFieldLabel:!0,hidden_messageFieldLabel:!0,required_emailFieldLabel:!0,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_addressFieldLabel:!1,required_subjectFieldLabel:!1,required_messageFieldLabel:!1,useCookie:!0},a={nameFieldLabel:{type:"string",default:"Name"},emailFieldLabel:{type:"string",default:"Email"},phoneFieldLabel:{type:"string",default:"Phone"},addressFieldLabel:{type:"string",default:"Address"},subjectFieldLabel:{type:"string",default:"Subject"},messageFieldLabel:{type:"string",default:"Message"},submitButtonLabel:{type:"string",default:"Send"},successMessage:{type:"string",default:"Your details were sent successfully!"},errorMessage:{type:"string",default:"Please provide a valid email"},textDirection:{type:"string",default:"left",enum:["left","right"]},validationErrorMessage:{type:"string",default:"Please fill in all required fields."},onSubmitBehavior:{type:"string",default:"message",enum:["message","link"]}},s={skinPrefix:"contactform.",fields:["name","email","subject","phone","address","message"]},u={skinPrefix:"wysiwyg.viewer.skins.contactform.",fields:["name","email","phone","address","subject","message"]},c="DynamicContactForm",p="wysiwyg.viewer.components.ContactForm",d="wysiwyg.viewer.components.DynamicContactForm";return{exec:r}}),define("dataFixer/plugins/subscribeFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["emailFieldLabel","errorMessage","firstNameFieldLabel","lastNameFieldLabel","phoneFieldLabel","submitButtonLabel","subscribeFormTitle","successMessage","validationErrorMessage"];return{exec:function(i,r,o,a,s,u,c){var p=i.data.document_data;if(function(t){return"Template"===e.get(t,"siteInfo.documentType")}(c)){!function(i,r){if(e.includes(t.languages,r)){var o=t.translationsLoader.getTranslationAllKeys("subscribeFormTranslations",r);o&&e.forOwn(i,function(t){"SubscribeForm"===t.type&&e.forEach(n,function(e){t[e]=o[e]||t[e]})})}}(p,t.wixUserApi.getLanguage(o.cookie,a,o.language)),function(t){e.forOwn(t,function(e){"SubscribeForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))})}(p)}}}}),define("dataFixer/plugins/pageDataFixer",["lodash"],function(e){"use strict";function t(t){(function(t){return"Page"===e.get(t,"structure.type")})(t)&&function(t){e(t.data.document_data).filter({type:"Page"}).map("id").forEach(function(e){delete t.data.document_data[e]})}(t),function(t){e.forEach(t.data.document_data,function(e){"#SITE_STRUCTURE"===e.pageId&&(e.pageId="#masterPage")})}(t)}return{exec:t}}),define("dataFixer/plugins/groupFixer",["lodash"],function(e){"use strict";function t(r){e.forEach(r,function(e){!function(e){e.componentType===n&&(e.skin=i)}(e),t(e.components)})}var n="wysiwyg.viewer.components.Group",i="wysiwyg.viewer.components.GroupSkin";return{exec:function(e){var n=e.structure;if(n){var i=n.components||n.children,r=n.mobileComponents;i&&t(i),r&&t(r)}}}}),define("dataFixer/plugins/textSecurityFixer",["lodash"],function(e){"use strict";var t=["RichText","Text","StyledText","MediaRichText"];return{exec:function(n){var i=n.data.document_data;i&&function(n){e(n).pickBy(function(n){return e.includes(t,n.type)}).mapValues(function(e){return e.text=function(e){return e&&e.replace(/(<object[^>]*>)(.*?)(<\/object>)/gi,"")}(e.text),e.text=function(e){return e&&e.replace(/<img[^>]*(onerror|onload|onmouseenter|onmousemove|onmouseleave|onmouseover|onmouseup|onmouseout)[^>]*\/?>(<\/img>)?/gi,"")}(e.text),e}).value()}(i)}}}),define("dataFixer/plugins/pageUriSeoFixer",["lodash","coreUtils"],function(e){"use strict";var t=e.matchesProperty(["structure","type"],"Page");return{exec:function(n,i,r,o,a,s,u,c){e.get(c,"isSlash")&&!t(n)&&e.forEach(c.pageIdToResolvedUriSEO,function(e,t){n.data.document_data[t].pageUriSEO=e.curr})}}}),define("dataFixer/plugins/migrateStripToColumnsContainer",["lodash","dataFixer/helpers/CompsMigrationHelper","coreUtils"],function(e,t,n){"use strict";function i(t,i,r,o){o.componentType="wysiwyg.viewer.components.StripColumnsContainer",delete o.skin,o.styleId="strc1",this.setComponentProperties(t,o,{columnsMargin:0,frameMargin:0,fullWidth:!0,rowMargin:0,siteMargin:0,type:"StripColumnsContainerProperties"},i);var a=function(t,i){return{id:e.get(i,[t.id,"mediaId"],n.guidUtils.getUniqueId("media")),type:"Container",layout:{width:t.layout.width,height:t.layout.height,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:t.id}],fixedPosition:!1},components:t.components,componentType:"wysiwyg.viewer.components.Column",styleId:"strc1"}}(o,i);if(function(t,n){e.forEach(t.components,function(t){var i=e.get(t,["layout","anchors"],[]);e.forEach(i,function(e){"BOTTOM_PARENT"===e.type&&(e.targetComponent=n.id)})})}(o,a),function(t,n){t.behaviors&&(n.behaviors=e.clone(t.behaviors),delete t.behaviors),t.behaviorQuery&&(n.behaviorQuery=t.behaviorQuery,delete t.behaviorQuery)}(o,a),e.set(i,[o.id,"mediaId"],a.id),this.setComponentProperties(t,a,{type:"ColumnProperties",alignment:50},i),a.designQuery=o.designQuery,delete o.designQuery,r)o.layout.width=320,o.designQuery=e.get(i,[o.id,"designQuery"]),this.deleteComponentData(t,o);else{o.layout.width=980;var s={type:"MediaContainerDesignData",id:n.guidUtils.getUniqueId("dataItem","-"),background:{id:n.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}};this.setComponentDesignData(t,o,s,i)}delete o.dataQuery,o.components=[a]}var r=new t({"wysiwyg.viewer.components.StripContainer":i});return{exec:r.migratePage.bind(r)}}),define("dataFixer/plugins/tinyMenuSkinBackgroundFixer",["lodash"],function(e){"use strict";function t(t){function i(t,n,i){e.isUndefined(t)||e.isUndefined(t[n])||(t[i]=t[i]||t[n])}if(t.skin===n&&!e.isUndefined(t.style)&&!e.isUndefined(t.style.properties)){var r=t.style.properties,o=t.style.propertiesSource;e.forEach([["bg","bgDrop"],["bg","bgOpen"],["txt","bordercolor"],["txt","iconcolor"],["bordercolor","borderColorSelected"]],function(e){var t=e[0],n=e[1];i(r,t,n),i(o,t,n),i(r,t="alpha-"+t,n="alpha-"+n),i(o,t,n)})}}var n="wysiwyg.viewer.skins.mobile.TinyMenuSkin";return{exec:function(n){var i=n.data&&n.data.theme_data;e.isEmpty(i)||e.forEach(i,t)}}}),define("dataFixer/plugins/tinyMenuLayoutFixer",["lodash"],function(e){"use strict";function t(n){var i=e.find(n,{id:"TINY_MENU"});return i?(i.layout.fixedPosition&&i.layout.x>320&&(i.layout.x=250),!0):e.some(n,function(n){return!e.isEmpty(n.components)&&t(n.components)})}return{exec:function(n){"masterPage"===e.get(n,["structure","id"])&&t(n.structure.mobileComponents)}}}),define("dataFixer/plugins/designDataFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(e){return"wysiwyg.viewer.components.StripContainer"===e.componentType}function i(t){return!e.isUndefined(t.designQuery)}function r(e,t,n){return t[n]=e[n],delete e[n],t[n]}function o(n,i,o,a,s){var u=s.dataQuery.slice(1),c=function(n,i,r){return e.isUndefined(r)&&(r=t.guidUtils.getUniqueId("dataItem","-")),i[r]={id:r,type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},n.designQuery="#"+r,r}(s,i);o[u]=c;var p=function(t,n,i,o){var a=i[t];if(!e.isUndefined(a.background)){var s=a.background.slice(1),u=r(i,o,s);if(!e.isUndefined(u.mediaRef)){var c=r(i,o,u.mediaRef.slice(1));"WixVideo"===c.type&&r(i,o,c.posterImageRef.slice(1)),e.isUndefined(c.originalImageDataRef)||r(i,o,c.originalImageDataRef.slice(1)),e.isUndefined(c.link)||delete c.link}return e.isUndefined(u.imageOverlay)||r(i,o,u.imageOverlay.slice(1)),delete a.background,o[n].background="#"+s,s}}(u,c,n,i);e.isUndefined(p)||(a[u]=p)}function a(e,t,n,i){var r=i.dataQuery.slice(1);i.designQuery="#"+t[r]}function s(t){return e.isUndefined(t.components)?e.isUndefined(t.children)?[]:t.children:t.components}function u(t){for(var n=e.clone(t)||[],i=[];n.length>0;){var r=n.pop();i.push(r);var o=s(r);e.forEach(o,function(e){n.push(e)})}return i}return{exec:function(t){var r=function(e){return u(s(e.structure))}(t),c=function(e){return u(e.structure.mobileComponents)}(t);t.data.design_data=t.data.design_data||{},function(t,r,s,u){var c={},p={},d=e.filter(t,n);e(d).reject(i).forEach(e.partial(o,s,u,p,c)),e(r).filter(function(e){return n(e)&&!i(e)}).forEach(e.partial(a,u,p,c))}(r,c,t.data.document_data,t.data.design_data)}}}),define("dataFixer/plugins/homePageLoginDataFixer",["lodash"],function(e){"use strict";return{exec:function(t){var n=t.data.document_data;e.isEmpty(n)||function(t){e.forEach(t,function(e){"LoginToWixLink"!==e.type&&"HomePageLogin"!==e.type||function(e){e.metaData&&"2.0"===e.metaData.schemaVersion||(e.sendMail=!0)}(e)})}(n)}}}),define("dataFixer/plugins/characterSetsFixer",["lodash"],function(e){"use strict";return{exec:function(t){return t.structure&&"Document"===t.structure.type&&e.isEmpty(t.data.document_data.masterPage.characterSets)&&(t.data.document_data.masterPage.characterSets=["latin"]),t}}}),define("dataFixer/plugins/popupPropsTempDataFixer",["lodash"],function(e){"use strict";return{exec:function(t){var n=e.get(t,["data","component_properties",t.structure.id]);n&&n.popup&&(e.forEach(["desktop","mobile"],function(t){var i=n[t],r=n.popup[t];(i||r)&&e.set(n,[t,["popup"]],e.assign(i||{},r||{}))}),delete n.popup)}}}),define("dataFixer/plugins/blogSelectionSharerCustomizationsFixer",["lodash","coreUtils"],function(e,t){"use strict";return{exec:function(n){e(n.data.document_data).filter({type:"AppPart",appPartName:t.blogAppPartNames.SINGLE_POST}).forEach(function(t){var n=e.find(t.appLogicCustomizations,{forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:t.viewName});n||(n={forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:t.viewName,type:"AppPartCustomization",format:""},t.appLogicCustomizations.push(n))})}}}),define("dataFixer/plugins/quickActionBarDataFixer",["lodash"],function(e){"use strict";function t(t){return e.find(t.structure.mobileComponents,{id:"QUICK_ACTION_BAR"})}function n(n){t(n).propertyQuery="quickActionBarProps",e.assign(n.data.component_properties,{quickActionBarProps:{type:"QuickActionBarProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},colorScheme:"brand",invertColors:!0,alignment:"right",hideText:!0}})}function i(e){return!!t(e)}return{exec:function(r,o,a,s,u,c,p,d){if("masterPage"===r.structure.id){if(function(t){e(t.data.document_data).filter(function(t){return"QuickActionBarItem"===t.type&&e.isString(t.text)}).forEach(function(e){e.text=e.text.slice(0,40)})}(r),i(r))return function(t){var i=e.find(t.structure.mobileComponents,{id:"QUICK_ACTION_BAR"});e.isUndefined(i.components)&&(i.components=[]),i.type="Container",e.isUndefined(t.data.component_properties[i.propertyQuery])&&n(t)}(r),void function(t){var n=e.find(t.structure.mobileComponents,{id:"QUICK_ACTION_BAR"}),i=e.get(t.data.theme_data,[n.styleId,"style","properties"]);e.transform(["controlButtonBorderColor","actionsBorderColor"],function(e,t){/^rgb/.test(e[t])&&(e[t]="#ffffff")},i)}(r);(function(t){var n=e.find(t,{appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"});return!e.isUndefined(n)&&!e.get(n,"permissions.revoked")})(d.clientSpecMap)&&!i(r)&&!d.quickActionsMenuEnabled&&(!function(e){e.structure.mobileComponents.push({type:"Container",id:"QUICK_ACTION_BAR",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],styleId:"quickActionBarStyle",layout:{fixedPosition:!0}})}(r),function(n){t(n).styleId="quickActionBarStyle",e.assign(n.data.theme_data,{quickActionBarStyle:{type:"TopLevelStyle",id:"quickActionBarStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true",controlButtonBG:"#ffffff",controlButtonFG:"#4682b4",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",pageId:"",compId:"",styleType:"custom"}})}(r),n(r))}}}}),define("dataFixer/plugins/boxSlideShowDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n="BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";return{exec:function(i,r,o,a,s,u,c){var p=i.data.document_data;if("Template"===e.get(c,"siteInfo.documentType")){!function(i,r){if(e.includes(t.languages,r)){var o=t.translationsLoader.getTranslationAllKeys("boxSlideShow",r);o&&e.forOwn(i,function(e){if("boxSlideShowSlide"===e.type||"StripContainerSlideShowSlide"===e.type){var t=e.title?e.title.split(" ")[1]:"";e.title=o[n]&&t?o[n].replace("<%= curr_slide %>",t):e.title}})}}(p,o?t.wixUserApi.getLanguage(o.cookie,a,o.language):"en")}}}}),define("dataFixer/plugins/appPartMobileFeedMediaDateHiddenFixer",["lodash","coreUtils"],function(e,t){"use strict";var n={exec:function(i){e.forEach(i.data.document_data,function(e){e.appPartName&&e.appPartName===t.blogAppPartNames.FEED&&n.fixMobileDateCustomization(e)})},fixMobileDateCustomization:function(t){e.forEach(t.appLogicCustomizations,function(e){"date"===e.fieldId&&"Mobile"===e.format&&"Post"===e.forType&&"comp.hidden"===e.key&&(e.fieldId="dateAndAuthor")})}};return n}),define("dataFixer/plugins/originalImageDataRefFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(e){return"Image"===e.type}function i(e,t){return"undefined"!==t&&"null"!==t&&e.length>1}return{exec:function(r){var o=e.get(r,["data","document_data"]);o&&e(o).pickBy(n).groupBy("originalImageDataRef").pickBy(i).forOwn(function(n,i){var r=e.tail(n),a=i.replace("#","");e.forEach(r,function(n){var i=function(n,i){var r=i+"_"+t.guidUtils.getUniqueId(),o=e.cloneDeep(n[i]);return o.id=r,o}(o,a);o[i.id]=i,n.originalImageDataRef="#"+i.id})})}}}),define("dataFixer/plugins/tpaWixForumDataFixer",["lodash"],function(e){"use strict";function t(t,i){!function(t,n){!0===function(t){if(t){var n=t.widgets[r];return e.get(n,"shouldBeStretchedByDefaultMobile")}return null}(t)&&(e.set(n.layout,"dock",o),10===n.layout.y&&(n.layout.y=0))}(i,function(t){var i=[].concat(e.get(t,"structure.mobileComponents"));for(;i.length>0;){var r=i.shift();if(r&&r.componentType===n)return r;r.components&&(i=i.concat(r.components))}}(t))}var n="wysiwyg.viewer.components.tpapps.TPASection",i="14724f35-6794-cd1a-0244-25fd138f9242",r="1489040e-001f-4631-55a9-2c29b4417126",o={left:{vw:0},right:{vw:0}};return{exec:function(n,o,a,s,u,c,p,d){var l=void 0,m=e.get(d,"clientSpecMap"),g=d.isExperimentOpen("sv_tpaSectionsMobileFSDataFixer"),f=function(t){var n=e.find(t,{appDefinitionId:i});return e.get(n,"applicationId")}(m);if(f&&g){var y=e.get(m,f);if("masterPage"===e.get(n,"structure.id")){var w=e.get(n,"data.document_data");(l=e.find(w,{tpaApplicationId:f}))&&function(t,n){var i=n.widgets[r];!0===e.get(i,"appPage.landingPageInMobile")&&(t.isMobileLandingPage=!0)}(l,y)}else{l=e.get(n,["data","document_data"]);e.find(l,{applicationId:f.toString(),type:"TPA"})&&t(n,y)}}}}}),define("dataFixer/plugins/filterEffectPropertyFixer",["lodash"],function(e){"use strict";return{exec:function(t){var n=t.data.component_properties;e.isEmpty(n)||function(t){e.forEach(t,function(e){"WPhotoProperties"===e.type&&e.effectName&&(e.filterEffect||"none"===e.effectName||(e.filterEffect={effectType:e.effectName}),delete e.effectName)})}(n)}}}),define("dataFixer/plugins/tinyMenuSkinFixer",["lodash"],function(e){"use strict";function t(n){var i=e.find(n,{id:"TINY_MENU"});return i||(e.forEach(n,function(n){if(!e.isEmpty(n.components))return!(i=t(n.components))}),i)}var n=["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromLeftSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromRightSkin"],i="wysiwyg.viewer.skins.mobile.TinyMenuSkin",r="tm2";return{exec:function(o){if("masterPage"===e.get(o,["structure","id"])){var a=t(o.structure.mobileComponents);a&&!function(t,i){var r=e.get(i,[t.styleId,"skin"]),o=t.skin;return r&&o&&e.includes(n,r)&&e.includes(n,o)}(a,o.data.theme_data)&&function(e){e.skin=i,e.styleId=r}(a)}}}}),define("dataFixer/plugins/tpaPublicAPIWidgetDataFixer",["lodash","experiment"],function(e,t){"use strict";return{exec:function(n,i,r,o,a,s,u){t.isOpen("sv_tpaAddPublicAPI",{rendererModel:u})&&e.forEach(n.structure.components,function(t){if("wysiwyg.viewer.components.tpapps.TPAWidget"===t.componentType){var i=function(t,n){var i=t.data.document_data[n.dataQuery.replace("#","")];return{widgetId:e.get(i,"widgetId"),applicationId:e.get(i,"applicationId")}}(n,t),r=e.get(u,"clientSpecMap["+i.applicationId+"].widgets",[]);e.forEach(r,function(e){e.publicAPI={restart:""}})}})}}}),define("dataFixer/plugins/svgShapeToVectorImageFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(t,i,r,s){e.forEach(t,function(t){if(t.components)t.componentType===a&&(!function(t,i,r){var o=i[e.get(t,"dataQuery","").replace("#","")];n(t.components,i,r,e.get(o,"items"))}(t,i,r),s=[]),n(t.components,i,r,s);else{var d=o[t.componentType];if(d){var l=t.skin,m=e.get(t,"propertyQuery","").replace("#",""),g=e.get(t,"dataQuery","").replace("#","");r[m]||(r[m]={});var f=i[g],y=r[m];p(t,d),u(f,d,l),c(y,d),e.forEach(e.get(t,["modes","overrides"]),function(t){if(t.propertyQuery){var n=e.get(t,"propertyQuery","").replace("#","");r[n]||(r[n]={});var i=r[n];c(i,d)}}),e.forEach(s,function(n){var r=i[e.get(t,"dataQuery","").replace("#","")+"__"+n];r&&u(r,d,l)})}}})}var i="wysiwyg.viewer.components.PopupCloseIconButton",r="wysiwyg.viewer.components.svgshape.SvgShape",o=_defineProperty({},r,t.vectorImageConversionUtils.vectorImageDefaults),a="wysiwyg.viewer.components.Repeater",s=t.vectorImageConversionUtils.convertStyle,u=t.vectorImageConversionUtils.convertData,c=t.vectorImageConversionUtils.convertProperties,p=t.vectorImageConversionUtils.convertStructure;return{exec:function(t,a,u,c,p,d,l,m){if(m.isExperimentOpen("se_vector_image")){var g=t.data.theme_data,f=t.data.document_data,y=t.data.component_properties,w=t.structure.components||t.structure.children,v=t.structure.mobileComponents,h=[];e.isEmpty(g)||function(t){e.forEach(t,function(t){if(e.includes(t.skin,"svgshape")&&t.componentClassName!==i){var n=o[r];s(t,n)}})}(g),e.isEmpty(w)||n(w,f,y,h),e.isEmpty(v)||n(v,f,y,h)}}}}),define("dataFixer/plugins/artAndShapeToVectorImageFixer",["lodash","coreUtils"],function(e,t){"use strict";function n(t){e.forEach(t,function(e){var t=i[e.componentType];t&&o(e,t),e.components&&n(e.components)})}var i={"wysiwyg.viewer.components.VectorImageArt":t.vectorImageConversionUtils.vectorImageDefaults,"wysiwyg.viewer.components.VectorImageShape":t.vectorImageConversionUtils.vectorImageDefaults},r=t.vectorImageConversionUtils.convertStyle,o=t.vectorImageConversionUtils.convertStructure;return{exec:function(t){var o=t.data.theme_data,a=t.structure.components||t.structure.children,s=t.structure.mobileComponents;e.isEmpty(o)||function(t){e.forEach(t,function(e){var t=i[e.componentClassName];t&&r(e,t)})}(o),e.isEmpty(a)||n(a),e.isEmpty(s)||n(s)}}}),define("dataFixer/plugins/migrateIframesToSemiNativeComponents",["lodash","dataFixer/helpers/CompsMigrationHelper"],function(e,t){"use strict";function n(t,n,o,a,s){var u=function(t){return e(t).filter("appFields.platform").reduce(function(t,n){return e(n.widgets).pickBy(["componentFields.semiNative",!0]).mapValues(e.constant(!0)).assign(t).value()},{})}(t),c=this.getComponentData(n,s);s.componentType===r&&u[c.widgetId]&&(s.componentType="platform.components.semiNativeComponent",s.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",s.styleId+=i,this.setComponentData(n,s,e.defaults({type:"SemiNative"},c),o))}var i="-semi",r="wysiwyg.viewer.components.tpapps.TPAWidget";return{exec:function(r,o,a,s,u,c,p,d){if(d.isExperimentOpen("sv_migrateTpaToSemiNative")&&d.isViewerMode){"masterPage"===r.structure.id&&function(t){var n=e(t.data.theme_data).filter({componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}).map(function(t){var n=e.cloneDeep(t);return n.componentClassName="platform.components.semiNativeComponent",n.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",n}).transform(function(e,t){e[t.id+i]=t},{}).value();e.assign(t.data.theme_data,n)}(r);var l={"wysiwyg.viewer.components.tpapps.TPAWidget":e.partial(n,d.clientSpecMap)};new t(l).migratePage(r)}}}}),define("dataFixer/plugins/migrateGridDataSource",["lodash","dataFixer/helpers/CompsMigrationHelper"],function(e,t){"use strict";function n(t,n,i,r){var o=t.data.document_data[r.dataQuery.slice(1)],a=t.data.component_properties,s=a[r.propertyQuery];if(e.has(s,"dataSource")){var u={type:s.dataSource.type,revision:s.dataSource.id};delete s.dataSource;var c="mobile_"+r.propertyQuery;e.has(a,c)&&delete a[c].dataSource,e.set(o,"dataSource",u)}}return{exec:function(e){new t({"wysiwyg.viewer.components.Grid":n}).migratePage(e)}}}),define("dataFixer/plugins/unforkDesignData",["lodash","dataFixer/helpers/CompsMigrationHelper"],function(e,t){"use strict";var n=new t({"wysiwyg.viewer.components.Column":function(t,n,i,r){i&&e.startsWith(r.designQuery,"#mobile_")&&(this.deleteComponentDesignData(t,r),r.designQuery=e.replace(r.designQuery,"mobile_",""))}});return{exec:n.migratePage.bind(n)}}),define("dataFixer/plugins/stripColumnsContainerNoDesignFixer",["lodash","dataFixer/helpers/CompsMigrationHelper","coreUtils"],function(e,t,n){"use strict";function i(e,t,i,r){if(!r.designQuery&&!i){r.layout.width=980;var o={type:"MediaContainerDesignData",id:n.guidUtils.getUniqueId("dataItem","-"),background:{id:n.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}};this.setComponentDesignData(e,r,o,t)}}var r=new t({"wysiwyg.viewer.components.StripColumnsContainer":i,"wysiwyg.viewer.components.Column":i});return{exec:r.migratePage.bind(r)}}),define("dataFixer/plugins/hoverBoxPropertyDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=function(e){return"wysiwyg.viewer.components.HoverBox"===e.componentType};return{exec:function(i){var r=t.dataUtils.getAllCompsInStructure(i.structure,!1,n),o=t.dataUtils.getAllCompsInStructure(i.structure,!0,n);e.forEach(r,function(t,n){var r=o[n];if(r){var a=e.get(r,["propertyQuery"]),s=e.get(i,["data","component_properties",a,"mobileDisplayedModeId"]),u=e.findIndex(e.get(r,["modes","definitions"]),{modeId:s});e.set(r,["modes","definitions"],e.get(t,["modes","definitions"]));var c=e.get(t,["modes","definitions",u,"modeId"]);e.set(i,["data","component_properties",a,"mobileDisplayedModeId"],c)}})}}}),define("dataFixer/core/fixPageData",["lodash","loggingUtils","coreUtils","experiment","dataFixer/plugins/galleriesMobileTypeFixer","dataFixer/plugins/pageTopFixer","dataFixer/plugins/masterPageFixer","dataFixer/plugins/customSiteMenuFixer","dataFixer/plugins/multipleMenusFixer","dataFixer/plugins/verticalMenuFixer","dataFixer/plugins/skinFixer","dataFixer/plugins/stylesFixer","dataFixer/plugins/bgImageStripDataFixer","dataFixer/plugins/compFixer","dataFixer/plugins/galleryFixer","dataFixer/plugins/behaviorsFixer","dataFixer/plugins/connectionsDataFixer","dataFixer/plugins/fiveGridLineLayoutFixer","dataFixer/plugins/toPageAnchorsFixer","dataFixer/plugins/wrongAnchorsFixer","dataFixer/plugins/addMissingAnchorsOfMasterPage","dataFixer/plugins/sitePagesFixer","dataFixer/plugins/linkRefDataFixer","dataFixer/plugins/fromDocumentToThemeData","dataFixer/plugins/tpaGluedWidgetDataFixer","dataFixer/plugins/tpaAddChatAppDataFixer","dataFixer/plugins/tpaProGalleryBackgroundDataFixer","dataFixer/plugins/compsWithImagesDataFixer","dataFixer/plugins/appPartCustomizationsFixer","dataFixer/plugins/backgroundMediaConverter","dataFixer/plugins/backgroundMediaUndefinedFixer","dataFixer/plugins/backgroundMediaRefDuplicationFixer","dataFixer/plugins/stripContainerBgEffectFixer","dataFixer/plugins/documentMediaFixer","dataFixer/plugins/pinterestFollowFixer","dataFixer/plugins/blogPageMenuFixer","dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer","dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer","dataFixer/plugins/appPartTagsValueCustomizationFormatFixer","dataFixer/plugins/appPartDuplicateCustomizationFixer","dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer","dataFixer/plugins/blogDateAndAuthorHiddenCustomizationFixer","dataFixer/plugins/blogDateAlignmentCustomizationFixer","dataFixer/plugins/appPartBrokenButtonStyleFixer","dataFixer/plugins/blogDateFormatCustomizationFormatFixer","dataFixer/plugins/contactFormDataFixer","dataFixer/plugins/contactFormMigrationDataFixer","dataFixer/plugins/subscribeFormDataFixer","dataFixer/plugins/pageDataFixer","dataFixer/plugins/groupFixer","dataFixer/plugins/textSecurityFixer","dataFixer/plugins/pageUriSeoFixer","dataFixer/plugins/migrateStripToColumnsContainer","dataFixer/plugins/tinyMenuSkinBackgroundFixer","dataFixer/plugins/tinyMenuLayoutFixer","dataFixer/plugins/designDataFixer","dataFixer/plugins/homePageLoginDataFixer","dataFixer/plugins/characterSetsFixer","dataFixer/plugins/popupPropsTempDataFixer","dataFixer/plugins/blogSelectionSharerCustomizationsFixer","dataFixer/plugins/quickActionBarDataFixer","dataFixer/plugins/boxSlideShowDataFixer","dataFixer/plugins/appPartMobileFeedMediaDateHiddenFixer","dataFixer/plugins/originalImageDataRefFixer","dataFixer/plugins/tpaWixForumDataFixer","dataFixer/plugins/filterEffectPropertyFixer","dataFixer/plugins/tinyMenuSkinFixer","dataFixer/plugins/tpaPublicAPIWidgetDataFixer","dataFixer/plugins/svgShapeToVectorImageFixer","dataFixer/plugins/artAndShapeToVectorImageFixer","dataFixer/plugins/migrateIframesToSemiNativeComponents","dataFixer/plugins/migrateGridDataSource","dataFixer/plugins/unforkDesignData","dataFixer/plugins/stripColumnsContainerNoDesignFixer","dataFixer/plugins/hoverBoxPropertyDataFixer"],function(e,t,n,i,r,o,a,s,u,c,p,d,l,m,g,f,y,w,v,h,T,S,k,x,I,_,F,M,b,P,E,C,A,O,B,D,L,N,U,R,G,H,Q,V,z,W,q,Y,j,Z,J,K,X,$,ee,te,ne,ie,re,oe,ae,se,ue,ce,pe,de,le,me,ge,fe,ye,we,ve,he,Te){"use strict";var Se=e.compact([r,a,P,E,C,j,s,u,c,p,d,l,m,g,f,y,ae,w,v,h,T,S,k,x,o,I,_,F,M,b,te,A,O,B,D,L,N,U,G,H,Q,R,V,z,q,j,Z,J,K,X,$,ee,ne,re,ie,oe,ue,ce,pe,de,le,me,ge,fe,ye,we,ve,he,Te]);Object.freeze(Se);var ke=["merge_clipart_and_image","sv_contactFormTemplatesMigration","sv_contactFormFinalMigration","sv_fixedMobileHeader","sv_migrateTpaToSemiNative","se_vector_image","se_proGalleryBGDataFixer","sv_tpaAddPublicAPI","sv_tpaSectionsMobileFSDataFixer"];return function(r,o,a,s,u,c,p){var d={};d.isSlash=e.matchesProperty("format",n.siteConstants.URL_FORMATS.SLASH)(u),d.pageIdToResolvedUriSEO=e.get(u,"pageIdToResolvedUriSEO",{}),d.clientSpecMap=e.get(p,"clientSpecMap"),d.quickActionsMenuEnabled=e.get(p,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1),d.experiments=e.filter(ke,function(e){return i.isOpen(e,{rendererModel:p})}),d.isExperimentOpen=function(t){return e.includes(d.experiments,t)},d.isViewerMode=c;var l=r.structure.id;return l=l?5===l.length||4===l.length?"":" "+l:" masterPage",t.performance.time("Fix page"+l,function(){var t=r.data||{};return t.document_data=t.document_data||{},t.theme_data=t.theme_data||{},t.component_properties=t.component_properties||{},t.mobile_hints=t.mobile_hints||{},r.data=t,e.forEach(Se,function(e){e.exec(r,o,a,s,u,c,p,d)}),se.exec(r,o,a,s,u,c,p,d),W.exec(r,o,a,s,u,c,p,d),Y.exec(r,o,a,s,u,c,p,d),r},c)}}),define("dataFixer/plugins/deprecatedSiteModelMigrater",["lodash","coreUtils","dataFixer/core/fixPageData"],function(e,t,n){"use strict";function i(e){switch(e){case"wysiwyg.viewer.components.WSiteStructure":return"Document";case"mobile.core.components.Page":return"Page";case"wixapps.integration.components.Area":case"mobile.core.components.Container":case"wysiwyg.viewer.components.HeaderContainer":case"wysiwyg.viewer.components.FooterContainer":case"wysiwyg.viewer.components.PagesContainer":case"wysiwyg.viewer.components.ScreenWidthContainer":case"wysiwyg.viewer.components.StripContainer":return"Container"}return"Component"}function r(e){return parseInt(e||0,10)}function o(o){o.pagesData={};var a=e.get(o,"wixData.document_data.SITE_STRUCTURE.mainPage")||e.get(o,"wixData.document_data.masterPage.mainPage"),s=a&&a.slice(1);o.pagesData.masterPage={data:o.wixData},o.pagesData.masterPage.structure={};var u={page:"masterPage",childrenIndex:{}};t.htmlParser(o.wixHtmlRaw,{start:function(t,n,o,a,s){var u=e(a).map("name").invokeMap("toLowerCase").zipObject(e.map(a,"value")).value();"Page"===i(u.comp)&&(n.page=u.id),t.pagesData[n.page]=t.pagesData[n.page]||{structure:{},data:{},theme_data:{}};var c=t.pagesData[n.page].structure=t.pagesData[n.page].structure||{};if(e.has(n.childrenIndex,n.page)){for(var p=0;p<n.childrenIndex[n.page].length;p++)c=c.components[n.childrenIndex[n.page][p]];var d={};n.childrenIndex[n.page].push(c.components.length),c.components.push(d),c=d}else n.childrenIndex[n.page]=[];c.componentType=u.comp,c.type=i(u.comp),c.id=u.id,c.components=[],c.skin=u.skin,c.styleId=u.styleid,u.dataquery&&(c.dataQuery=u.dataquery),c.propertyQuery=u.propertyquery,c.layout={width:r(u.width),height:r(u.height),x:r(u.x),y:r(u.y),anchors:t.wixAnchors[u.id]||[]}}.bind(void 0,o,u),end:function(e,t,n){0===t.childrenIndex[t.page].length?t.page="masterPage":t.childrenIndex[t.page].pop()}.bind(void 0,o,u)});var c=e.keys(o.pagesData),p=e.without(c,"masterPage");o.pagesData.masterPage.data.document_data.MAIN_MENU=o.pagesData.masterPage.data.document_data.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},e.forEach(c,function(e){o.pagesData[e]=n(o.pagesData[e],p,o.requestModel,o.currentUrl,o.urlFormatModel)}),o.publicModel.pageList={mainPageId:s,pages:e.map(p,function(t){return e.chain(o).get(["pagesData","masterPage","data","document_data",t]).pick(["title","pageUriSEO"]).assign({pageId:t}).value()})}}return o}),define("dataFixer/plugins/fixBackgroundData",["lodash","coreUtils","dataFixer/imageService/imageTransformDataFixers"],function(e,t,n){"use strict";function i(t){var n=t.getPageDataMap(t.MASTER_PAGE_ID,t.dataTypes.THEME),i=t.getPageDataMap(t.MASTER_PAGE_ID,t.dataTypes.DATA),a=e(i).filter({type:"BackgroundImage"}).map("id").value();(function(t){var n=e.find(t,{type:"Page"});return t[n.id].pageBackgrounds&&"BackgroundMediaUnified"===t[n.id].pageBackgrounds.type})(i)||(function(t){var n=e.find(t,{type:"Page"});return!t[n.id].pageBackgrounds}(i)?function(t,n){var i=e(n).filter({type:"Page"}).map("id").value(),a=t.THEME_DATA.siteBg||"none 0 0 center center auto repeat repeat scroll none",s=("[siteBg]"===t.THEME_DATA.mobileBg?t.THEME_DATA.siteBg:t.THEME_DATA.mobileBg)||"none 0 0 center center auto repeat repeat scroll none",u=o(a),c=o(s);u.id="customBgImg"+r(),c.id="customBgImg"+r([u.id]),n[u.id]=u,n[c.id]=c,e.forEach(i,function(e){n[e].pageBackgrounds={desktop:{custom:!0,isPreset:!1,ref:"#"+u.id},mobile:{custom:!0,isPreset:!1,ref:"#"+c.id}}})}(n,i):e.forEach(a,function(e){s(i[e])}))}function r(t){var n="";for(t=t||[];e.includes(t,n);)n=e.random(0,99999).toString(36).replace(" ","_");return n}function o(t){var n=e.compact(t.split(" "));return a.apply(this,n)}function a(e,t,i,r,o,a,s,c,p,d,l,m){var g=n.cssToAlignType(r+" "+o),f=n.cssToFittingType({bgRepeat:s+" "+c,bgSize:a});return f=function(e){var t={};return t[u.fittingTypes.TILE]=u.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[u.fittingTypes.TILE_HORIZONTAL]=u.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[u.fittingTypes.TILE_VERTICAL]=u.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[u.fittingTypes.ORIGINAL_SIZE]=u.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}(f),l=l||{},d&&"none"!==d||(d="rgba(0,0,0,0)"),{type:"BackgroundMediaUnified",alignType:g,fittingType:f,attachment:p,imageWidth:Number(t),imageHeight:Number(i),mediaType:"image",uri:e,color:d,metaData:{isHidden:l.isHidden||!1,isPreset:l.isPreset||!1,schemaVersion:2},id:m}}function s(e){var t=[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData,e.id];return a.apply(this,t)}var u=t.imageClientApi;return{fixBackgroundData:i,migrateBgDataItem:s,migrateBgString:o}}),define("dataFixer",["dataFixer/core/fixPageData","dataFixer/plugins/deprecatedSiteModelMigrater","dataFixer/plugins/fixBackgroundData","dataFixer/imageService/imageTransformDataFixers","dataFixer/helpers/anchorCyclesHelper"],function(e,t,n,i,r){"use strict";return{fix:e,deprecatedSiteModelMigrater:t,fixBackgroundData:n,imageTransformDataFixers:i,anchorCyclesHelper:r}});
//# sourceMappingURL=dataFixer.min.js.map